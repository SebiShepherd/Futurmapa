Index: styles.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>:root {\r\n  --primary: #00457e;\r\n  --primary-bright: #00b5e2;\r\n  --inactive: #8c9eb8;\r\n  --inactive-light: #d7e0ed;\r\n  --stroke: rgba(20, 44, 70, 0.55);\r\n  --map-glow-muted: rgba(255, 255, 255, 0.28);\r\n  --map-glow-strong: rgba(255, 255, 255, 0.65);\r\n  --map-background-glow-strong: rgba(255, 255, 255, 0.35);\r\n  --map-background-glow-soft: rgba(255, 255, 255, 0.12);\r\n  --text: #f4f7ff;\r\n  --panel-bg: rgba(11, 26, 49, 0.82);\r\n  --panel-border: rgba(255, 255, 255, 0.16);\r\n  --chip-bg: rgba(255, 255, 255, 0.12);\r\n  --chip-active: rgba(255, 255, 255, 0.26);\r\n  --shadow-strong: 0 25px 60px rgba(0, 18, 46, 0.45);\r\n  --shadow-soft: 0 12px 30px rgba(0, 26, 58, 0.35);\r\n  --transition-speed: 240ms;\r\n  --font-family: \"Inter\", \"Segoe UI\", Roboto, sans-serif;\r\n  --chip-height: 55px; /* gemeinsame Höhe für Chips und Logo */\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml,\r\nbody {\r\n  margin: 0;\r\n  height: 100%;\r\n  background: radial-gradient(circle at 50% 30%, rgba(0, 121, 199, 0.35), rgba(0, 52, 92, 0.95)),\r\n    var(--primary);\r\n  color: var(--text);\r\n  font-family: var(--font-family, serif);\r\n  overflow: hidden;\r\n}\r\n\r\nbody::before {\r\n  content: \"\";\r\n  position: fixed;\r\n  inset: 0;\r\n  background: radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.08), transparent 45%),\r\n    radial-gradient(circle at 10% 80%, rgba(255, 255, 255, 0.06), transparent 40%);\r\n  pointer-events: none;\r\n  z-index: -2;\r\n}\r\n\r\n#app {\r\n    display: grid;\r\n    grid-template-columns: minmax(0, 3fr) minmax(360px, 1fr);\r\n    height: 100vh;\r\n    backdrop-filter: blur(12px);\r\n}\r\n\r\n#map-container {\r\n    position: relative;\r\n    overflow: hidden;\r\n    padding: 32px;\r\n}\r\n\r\n/* wrapper für logo + chips oben links */\r\n#map-top-left {\r\n  position: absolute;\r\n  top: 32px;\r\n  left: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  z-index: 12;\r\n}\r\n\r\n#brand-logo {\r\n  height: var(--chip-height);\r\n  width: auto;\r\n}\r\n\r\n#continent-chips {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  z-index: 11;\r\n}\r\n\r\n#map {\r\n    position: absolute;\r\n    inset: 0;\r\n    margin: 0;\r\n    overflow: hidden;\r\n}\r\n\r\n#map svg {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n#map svg .map-background {\r\n  fill: url(#map-background-gradient);\r\n  opacity: 0.75;\r\n  pointer-events: none;\r\n}\r\n\r\n#map svg .countries-layer {\r\n  filter: url(#map-drop-shadow);\r\n}\r\n\r\n#map svg .country {\r\n  fill: var(--inactive-light);\r\n  stroke: var(--stroke);\r\n  stroke-width: 0.6;\r\n  transition: fill var(--transition-speed) ease, opacity var(--transition-speed) ease;\r\n  cursor: pointer;\r\n}\r\n\r\n#map svg .country.is-active {\r\n  fill: var(--primary);\r\n  opacity: 1;\r\n}\r\n\r\n#map svg .country.is-highlighted {\r\n  fill: var(--primary-bright);\r\n}\r\n\r\n#map svg .country.is-inactive {\r\n  opacity: 0.65;\r\n  cursor: default;\r\n}\r\n\r\n.points-layer {\r\n  pointer-events: none;\r\n}\r\n\r\n.points-layer .data-point {\r\n  pointer-events: auto;\r\n  transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease;\r\n  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.45));\r\n}\r\n\r\n.points-layer .data-point circle.point-ring {\r\n  fill: rgba(255, 255, 255, 0.25);\r\n}\r\n\r\n.points-layer .data-point circle.point-core {\r\n  stroke: rgba(255, 255, 255, 0.7);\r\n  stroke-width: 1.4;\r\n}\r\n\r\n.points-layer .data-point text.point-icon,\r\n.points-layer .data-point g.point-icon {\r\n  pointer-events: none;\r\n}\r\n\r\n.points-layer .data-point.coming-soon circle.point-core {\r\n  fill: #9199ab !important;\r\n  stroke-dasharray: 2 2;\r\n}\r\n\r\n.points-layer .data-point.is-selected circle.point-core {\r\n  stroke-width: 2.4;\r\n  stroke: #fff;\r\n}\r\n\r\n.chip {\r\n  display: inline-flex;\r\n  flex-direction: column; /* Name + small nebeneinander */\r\n  align-items: center;\r\n    justify-content: center;\r\n  gap: 4px;\r\n  padding: 0 16px; /* vertikale Größe durch --chip-height */\r\n  height: var(--chip-height);\r\n  border-radius: 999px;\r\n  background: var(--chip-bg);\r\n  color: var(--text);\r\n  border: 1px solid rgba(255, 255, 255, 0.14);\r\n  font-size: 14px;\r\n  letter-spacing: 0.02em;\r\n  cursor: pointer;\r\n  transition: background var(--transition-speed) ease, transform var(--transition-speed) ease, border var(--transition-speed) ease;\r\n  box-shadow: var(--shadow-soft);\r\n}\r\n\r\n.chip:hover {\r\n  transform: translateY(-2px);\r\n  background: rgba(255, 255, 255, 0.22);\r\n}\r\n\r\n.chip.is-active {\r\n  background: var(--chip-active);\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.chip span {\r\n  font-weight: 600;\r\n  letter-spacing: 0.04em;\r\n}\r\n\r\n.chip small {\r\n  font-size: 11px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.12em;\r\n  opacity: 0.75;\r\n}\r\n\r\n#breadcrumb {\r\n  position: absolute;\r\n  bottom: 32px;\r\n  left: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  font-size: 15px;\r\n  letter-spacing: 0.02em;\r\n  z-index: 10;\r\n}\r\n\r\n.breadcrumb-item {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.breadcrumb-item button {\r\n  background: none;\r\n  border: none;\r\n  color: inherit;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  opacity: 0.8;\r\n  transition: opacity var(--transition-speed) ease;\r\n}\r\n\r\n.breadcrumb-item button:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.breadcrumb-separator {\r\n  opacity: 0.6;\r\n  font-size: 14px;\r\n}\r\n\r\n#reset-view {\r\n  position: absolute;\r\n  top: 32px;\r\n  right: 48px;\r\n  padding: 10px 18px;\r\n  border-radius: 999px;\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n  background: rgba(7, 29, 62, 0.6);\r\n  color: var(--text);\r\n  font-size: 14px;\r\n  letter-spacing: 0.02em;\r\n  cursor: pointer;\r\n  transition: background var(--transition-speed) ease, transform var(--transition-speed) ease;\r\n  box-shadow: var(--shadow-soft);\r\n  z-index: 10;\r\n}\r\n\r\n#reset-view:hover {\r\n  background: rgba(7, 29, 62, 0.85);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n#map-tooltip {\r\n  position: absolute;\r\n  pointer-events: none;\r\n  padding: 6px 12px;\r\n  border-radius: 6px;\r\n  background: rgba(6, 21, 44, 0.85);\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  font-size: 13px;\r\n  opacity: 0;\r\n  transform: translate(-50%, -120%);\r\n  transition: opacity 120ms ease;\r\n  z-index: 20;\r\n  white-space: nowrap;\r\n}\r\n\r\n#map-tooltip.is-visible {\r\n  opacity: 1;\r\n}\r\n\r\n#sidebar {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  padding: 36px 32px 32px 32px;\r\n  gap: 24px;\r\n  background: linear-gradient(170deg, rgba(4, 19, 37, 0.92) 0%, rgba(6, 30, 60, 0.82) 100%);\r\n  border-left: 1px solid rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(16px);\r\n  box-shadow: -12px 0 40px rgba(0, 13, 36, 0.45);\r\n  max-height: 100vh;\r\n  overflow-y: auto;\r\n  scrollbar-gutter: stable;\r\n}\r\n\r\n.sidebar-header h1 {\r\n  font-size: 28px;\r\n  margin: 0 0 8px 0;\r\n  letter-spacing: 0.04em;\r\n}\r\n\r\n.sidebar-header .subtitle {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  color: rgba(255, 255, 255, 0.74);\r\n}\r\n\r\n.sidebar-section {\r\n  background: rgba(4, 16, 36, 0.55);\r\n  border: 1px solid rgba(255, 255, 255, 0.08);\r\n  border-radius: 18px;\r\n  padding: 20px 22px;\r\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);\r\n}\r\n\r\n.sidebar-section h2 {\r\n  margin-top: 0;\r\n  font-size: 16px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.15em;\r\n  color: rgba(255, 255, 255, 0.68);\r\n}\r\n\r\n#continent-summary p,\r\n#country-list p {\r\n  margin: 0;\r\n  line-height: 1.6;\r\n  color: rgba(255, 255, 255, 0.78);\r\n}\r\n\r\n.country-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n}\r\n\r\n.country-button {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  border-radius: 12px;\r\n  background: rgba(255, 255, 255, 0.08);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  color: inherit;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  transition: transform var(--transition-speed) ease, background var(--transition-speed) ease, border var(--transition-speed) ease;\r\n}\r\n\r\n.country-button:hover {\r\n  transform: translateY(-2px);\r\n  background: rgba(255, 255, 255, 0.14);\r\n}\r\n\r\n.country-button.is-active {\r\n  background: rgba(255, 255, 255, 0.24);\r\n  border-color: rgba(255, 255, 255, 0.24);\r\n}\r\n\r\n.country-button.is-disabled {\r\n  opacity: 0.35;\r\n  cursor: not-allowed;\r\n  background: rgba(255, 255, 255, 0.04);\r\n}\r\n\r\n.country-button small {\r\n  font-size: 12px;\r\n  letter-spacing: 0.08em;\r\n  text-transform: uppercase;\r\n  color: rgba(255, 255, 255, 0.55);\r\n}\r\n\r\n#legend {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\r\n}\r\n\r\n.legend-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.legend-item .swatch {\r\n  flex: 0 0 18px;\r\n  width: 18px;\r\n  height: 18px;\r\n  min-width: 18px;\r\n  min-height: 18px;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  box-shadow: 0 0 12px rgba(255, 255, 255, 0.25);\r\n}\r\n\r\n.legend-item strong {\r\n  letter-spacing: 0.04em;\r\n}\r\n\r\n#detail-panel {\r\n  position: fixed;\r\n  inset: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(0, 13, 34, 0.55);\r\n  backdrop-filter: blur(8px);\r\n  opacity: 0;\r\n  pointer-events: none;\r\n  transition: opacity var(--transition-speed) ease;\r\n  z-index: 30;\r\n}\r\n\r\n#detail-panel.is-visible {\r\n  opacity: 1;\r\n  pointer-events: auto;\r\n}\r\n\r\n.panel-content {\r\n  width: min(720px, 88vw);\r\n  max-height: 80vh;\r\n  overflow: hidden;\r\n  background: var(--panel-bg);\r\n  border: 1px solid var(--panel-border);\r\n  border-radius: 28px;\r\n  box-shadow: var(--shadow-strong);\r\n  padding: 32px 36px 28px 36px;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.close-detail {\r\n  position: absolute;\r\n  top: 18px;\r\n  right: 22px;\r\n  background: rgba(255, 255, 255, 0.16);\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 36px;\r\n  height: 36px;\r\n  font-size: 24px;\r\n  color: var(--text);\r\n  cursor: pointer;\r\n  transition: background var(--transition-speed) ease, transform var(--transition-speed) ease;\r\n}\r\n\r\n.close-detail:hover {\r\n  background: rgba(255, 255, 255, 0.26);\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.panel-header h2 {\r\n  margin: 0 0 6px 0;\r\n  font-size: 26px;\r\n  letter-spacing: 0.04em;\r\n}\r\n\r\n.panel-header p {\r\n  margin: 0;\r\n  color: rgba(255, 255, 255, 0.72);\r\n  letter-spacing: 0.02em;\r\n}\r\n\r\n#org-selector {\r\n  display: flex;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.org-option {\r\n  padding: 10px 18px;\r\n  border-radius: 999px;\r\n  border: 1px solid rgba(255, 255, 255, 0.18);\r\n  background: rgba(255, 255, 255, 0.08);\r\n  color: inherit;\r\n  font: inherit;\r\n  cursor: pointer;\r\n  transition: background var(--transition-speed) ease, border var(--transition-speed) ease, transform var(--transition-speed) ease;\r\n}\r\n\r\n.org-option[aria-checked=\"true\"],\r\n.org-option:hover {\r\n  background: rgba(255, 255, 255, 0.24);\r\n  border-color: rgba(255, 255, 255, 0.32);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n#panel-body {\r\n  overflow-y: auto;\r\n  padding-right: 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18px;\r\n}\r\n\r\n.dataset-summary {\r\n  background: rgba(255, 255, 255, 0.08);\r\n  border-radius: 18px;\r\n  padding: 18px 20px;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  line-height: 1.6;\r\n}\r\n\r\n.metric-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\r\n  gap: 18px;\r\n}\r\n\r\n.metric-card {\r\n  background: rgba(6, 26, 52, 0.74);\r\n  border-radius: 16px;\r\n  padding: 18px;\r\n  border: 1px solid rgba(255, 255, 255, 0.06);\r\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);\r\n}\r\n\r\n.metric-card h3 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  letter-spacing: 0.08em;\r\n  text-transform: uppercase;\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.metric-value {\r\n  font-size: 26px;\r\n  font-weight: 700;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.metric-trend {\r\n  font-size: 13px;\r\n  color: rgba(255, 255, 255, 0.66);\r\n}\r\n\r\n.metric-trend.is-positive {\r\n  color: #5ce3b9;\r\n}\r\n\r\n.metric-trend.is-negative {\r\n  color: #ff8ba7;\r\n}\r\n\r\n.compare-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, minmax(0, 1fr));\r\n  gap: 18px;\r\n}\r\n\r\n.compare-column {\r\n  background: rgba(255, 255, 255, 0.08);\r\n  border-radius: 16px;\r\n  padding: 18px;\r\n  border: 1px solid rgba(255, 255, 255, 0.08);\r\n}\r\n\r\n.compare-column h3 {\r\n  margin-top: 0;\r\n  margin-bottom: 12px;\r\n  letter-spacing: 0.08em;\r\n  font-size: 13px;\r\n  text-transform: uppercase;\r\n  color: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n.compare-column ul {\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.compare-column li {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n  font-size: 15px;\r\n}\r\n\r\n.compare-column li span.value {\r\n  font-weight: 700;\r\n}\r\n\r\n.no-data,\r\n.coming-soon {\r\n  padding: 24px;\r\n  text-align: center;\r\n  border-radius: 18px;\r\n  border: 1px dashed rgba(255, 255, 255, 0.35);\r\n  background: rgba(255, 255, 255, 0.08);\r\n  font-size: 15px;\r\n  line-height: 1.7;\r\n}\r\n\r\n.progress-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 14px;\r\n}\r\n\r\n.progress-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.progress-item span {\r\n  font-size: 13px;\r\n  letter-spacing: 0.03em;\r\n  color: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n.progress-bar {\r\n  height: 10px;\r\n  border-radius: 999px;\r\n  background: rgba(255, 255, 255, 0.12);\r\n  overflow: hidden;\r\n}\r\n\r\n.progress-bar .fill {\r\n  height: 100%;\r\n  border-radius: 999px;\r\n  background: linear-gradient(90deg, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.35));\r\n}\r\n\r\n@media (max-width: 1200px) {\r\n  #app {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  #sidebar {\r\n    position: absolute;\r\n    inset: auto 24px 24px 24px;\r\n    background: rgba(3, 14, 32, 0.94);\r\n    border-radius: 24px;\r\n    border: 1px solid rgba(255, 255, 255, 0.16);\r\n    box-shadow: var(--shadow-strong);\r\n    max-height: 42vh;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  #map-container {\r\n    padding: 18px;\r\n  }\r\n\r\n  #map-top-left {\r\n    top: 20px;\r\n    left: 20px;\r\n  }\r\n\r\n  #breadcrumb {\r\n    left: 20px;\r\n    bottom: 20px;\r\n  }\r\n\r\n  #reset-view {\r\n    top: 20px;\r\n    right: 20px;\r\n  }\r\n\r\n  .panel-content {\r\n    width: 92vw;\r\n    padding: 24px;\r\n  }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/styles.css b/styles.css
--- a/styles.css	(revision 39111da0c5cef90353b52e334b697e8d8f08bdfe)
+++ b/styles.css	(date 1760862628884)
@@ -3,7 +3,8 @@
   --primary-bright: #00b5e2;
   --inactive: #8c9eb8;
   --inactive-light: #d7e0ed;
-  --stroke: rgba(20, 44, 70, 0.55);
+  /* stroke soll das gleiche wie --inactive sein (Alias) */
+  --stroke: var(--inactive);
   --map-glow-muted: rgba(255, 255, 255, 0.28);
   --map-glow-strong: rgba(255, 255, 255, 0.65);
   --map-background-glow-strong: rgba(255, 255, 255, 0.35);
@@ -31,7 +32,8 @@
   background: radial-gradient(circle at 50% 30%, rgba(0, 121, 199, 0.35), rgba(0, 52, 92, 0.95)),
     var(--primary);
   color: var(--text);
-  font-family: var(--font-family, serif);
+  /* generic fallback explizit außerhalb von var() angeben, damit Linter-Tools es erkennen */
+  font-family: var(--font-family), sans-serif;
   overflow: hidden;
 }
 
Index: .idea/copilotDiffState.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"CopilotDiffPersistence\">\r\n    <option name=\"pendingDiffs\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$/.gitignore\">\r\n          <value>\r\n            <PendingDiffInfo>\r\n              <option name=\"filePath\" value=\"$PROJECT_DIR$/.gitignore\" />\r\n              <option name=\"originalContent\" value=\"# Ignore runtime configuration (local overrides)&#10;config.json&#10;assets/favicon.ico&#10;assets/&#10;&#10;# Node / editor / OS temporary files (optional)&#10;node_modules/&#10;.DS_Store&#10;Thumbs.db&#10;&#10;\" />\r\n              <option name=\"updatedContent\" value=\"# Ignore runtime configuration (local overrides)&#13;&#10;config.json&#13;&#10;assets/favicon.ico&#13;&#10;assets/&#13;&#10;&#13;&#10;# Node / editor / OS temporary files (optional)&#13;&#10;node_modules/&#13;&#10;.DS_Store&#13;&#10;Thumbs.db&#13;&#10;&#13;&#10;# Local custom stylesheet (not committed)&#13;&#10;styles.custom.css\" />\r\n            </PendingDiffInfo>\r\n          </value>\r\n        </entry>\r\n        <entry key=\"$PROJECT_DIR$/index.html\">\r\n          <value>\r\n            <PendingDiffInfo>\r\n              <option name=\"filePath\" value=\"$PROJECT_DIR$/index.html\" />\r\n              <option name=\"originalContent\" value=\"&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;de&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot; /&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;&#10;    &lt;title id=&quot;document-title&quot;&gt;Futurmapa · Interaktive Konzern-Weltkarte&lt;/title&gt;&#10;    &lt;!-- Favicon is injected at runtime from config.json --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot; /&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;    &lt;div id=&quot;app&quot;&gt;&#10;      &lt;main id=&quot;map-container&quot;&gt;&#10;        &lt;!-- wrapper für logo + chips oben links --&gt;&#10;        &lt;div id=&quot;map-top-left&quot;&gt;&#10;          &lt;img id=&quot;brand-logo&quot; src=&quot;&quot; alt=&quot;Logo&quot; style=&quot;display:none;margin-right:6px;&quot; /&gt;&#10;          &lt;div id=&quot;continent-chips&quot; aria-label=&quot;Kontinentauswahl&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div id=&quot;breadcrumb&quot; aria-label=&quot;Navigation&quot;&gt;&lt;/div&gt;&#10;        &lt;div id=&quot;map&quot;&gt;&lt;/div&gt;&#10;        &lt;button id=&quot;reset-view&quot; type=&quot;button&quot;&gt;Zur Weltansicht&lt;/button&gt;&#10;        &lt;div id=&quot;map-tooltip&quot; role=&quot;status&quot; aria-live=&quot;polite&quot;&gt;&lt;/div&gt;&#10;      &lt;/main&gt;&#10;      &lt;aside id=&quot;sidebar&quot; aria-label=&quot;Regionale Details&quot;&gt;&#10;        &lt;header class=&quot;sidebar-header&quot;&gt;&#10;          &lt;div style=&quot;display:flex;align-items:center;gap:12px;&quot;&gt;&#10;            &lt;!-- logo image removed from here; it's now in the map header next to the chips --&gt;&#10;            &lt;h1 id=&quot;site-title&quot;&gt;Globale Präsenz&lt;/h1&gt;&#10;          &lt;/div&gt;&#10;          &lt;p class=&quot;subtitle&quot; id=&quot;site-subtitle&quot;&gt;&#10;            Wähle einen Kontinent, zoome in ein Land und entdecke die wichtigsten Kennzahlen&#10;            der einzelnen Geschäftsbereiche.&#10;          &lt;/p&gt;&#10;        &lt;/header&gt;&#10;        &lt;section id=&quot;continent-summary&quot; class=&quot;sidebar-section&quot;&gt;&lt;/section&gt;&#10;        &lt;section id=&quot;country-list&quot; class=&quot;sidebar-section&quot; aria-live=&quot;polite&quot;&gt;&lt;/section&gt;&#10;        &lt;section id=&quot;legend&quot; class=&quot;sidebar-section&quot;&gt;&lt;/section&gt;&#10;      &lt;/aside&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div id=&quot;detail-panel&quot; aria-hidden=&quot;true&quot;&gt;&#10;      &lt;div class=&quot;panel-content&quot; role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;panel-title&quot;&gt;&#10;        &lt;button class=&quot;close-detail&quot; type=&quot;button&quot; aria-label=&quot;Fenster schließen&quot;&gt;×&lt;/button&gt;&#10;        &lt;header class=&quot;panel-header&quot;&gt;&#10;          &lt;h2 id=&quot;panel-title&quot;&gt;&lt;/h2&gt;&#10;          &lt;p id=&quot;panel-subtitle&quot;&gt;&lt;/p&gt;&#10;        &lt;/header&gt;&#10;        &lt;div id=&quot;org-selector&quot; role=&quot;radiogroup&quot; aria-label=&quot;Geschäftsbereich&quot;&gt;&lt;/div&gt;&#10;        &lt;div id=&quot;panel-body&quot;&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src=&quot;vendor/d3.min.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;data/world-geojson.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;scripts/data.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;scripts/app.js&quot;&gt;&lt;/script&gt;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;&#10;\" />\r\n              <option name=\"updatedContent\" value=\"&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;de&quot;&gt;&#10;  &lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot; /&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;&#10;    &lt;title id=&quot;document-title&quot;&gt;Futurmapa · Interaktive Konzern-Weltkarte&lt;/title&gt;&#10;    &lt;!-- Favicon is injected at runtime from config.json --&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot; /&gt;&#10;    &lt;script&gt;&#10;      // Versuche, optional eine lokale styles.custom.css zu laden (wird durch .gitignore ausgeschlossen).&#10;      // Wenn die Datei vorhanden ist, wird sie ans &lt;head&gt; gehängt und überschreibt die bestehenden Styles.&#10;      (function(){&#10;        const href = 'styles.custom.css';&#10;        try {&#10;          // HEAD-Abfrage vermeidet unnötige Fehler, funktioniert wenn die Seite per http(s) ausgeliefert wird.&#10;          fetch(href, { method: 'HEAD', cache: 'no-store' })&#10;            .then(res =&gt; {&#10;              if (res.ok) {&#10;                const l = document.createElement('link');&#10;                l.rel = 'stylesheet';&#10;                l.href = href;&#10;                document.head.appendChild(l);&#10;                console.info('Loaded optional custom stylesheet:', href);&#10;              }&#10;            })&#10;            .catch(() =&gt; {&#10;              // ignore network/file errors silently&#10;            });&#10;        } catch (e) {&#10;          // ignore if fetch isn't available (e.g., very old environments)&#10;        }&#10;      })();&#10;    &lt;/script&gt;&#10;  &lt;/head&gt;&#10;  &lt;body&gt;&#10;    &lt;div id=&quot;app&quot;&gt;&#10;      &lt;main id=&quot;map-container&quot;&gt;&#10;        &lt;!-- wrapper für logo + chips oben links --&gt;&#10;        &lt;div id=&quot;map-top-left&quot;&gt;&#10;          &lt;img id=&quot;brand-logo&quot; src=&quot;&quot; alt=&quot;Logo&quot; style=&quot;display:none;margin-right:6px;&quot; /&gt;&#10;          &lt;div id=&quot;continent-chips&quot; aria-label=&quot;Kontinentauswahl&quot;&gt;&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div id=&quot;breadcrumb&quot; aria-label=&quot;Navigation&quot;&gt;&lt;/div&gt;&#10;        &lt;div id=&quot;map&quot;&gt;&lt;/div&gt;&#10;        &lt;button id=&quot;reset-view&quot; type=&quot;button&quot;&gt;Zur Weltansicht&lt;/button&gt;&#10;        &lt;div id=&quot;map-tooltip&quot; role=&quot;status&quot; aria-live=&quot;polite&quot;&gt;&lt;/div&gt;&#10;      &lt;/main&gt;&#10;      &lt;aside id=&quot;sidebar&quot; aria-label=&quot;Regionale Details&quot;&gt;&#10;        &lt;header class=&quot;sidebar-header&quot;&gt;&#10;          &lt;div style=&quot;display:flex;align-items:center;gap:12px;&quot;&gt;&#10;            &lt;!-- logo image removed from here; it's now in the map header next to the chips --&gt;&#10;            &lt;h1 id=&quot;site-title&quot;&gt;Globale Präsenz&lt;/h1&gt;&#10;          &lt;/div&gt;&#10;          &lt;p class=&quot;subtitle&quot; id=&quot;site-subtitle&quot;&gt;&#10;            Wähle einen Kontinent, zoome in ein Land und entdecke die wichtigsten Kennzahlen&#10;            der einzelnen Geschäftsbereiche.&#10;          &lt;/p&gt;&#10;        &lt;/header&gt;&#10;        &lt;section id=&quot;continent-summary&quot; class=&quot;sidebar-section&quot;&gt;&lt;/section&gt;&#10;        &lt;section id=&quot;country-list&quot; class=&quot;sidebar-section&quot; aria-live=&quot;polite&quot;&gt;&lt;/section&gt;&#10;        &lt;section id=&quot;legend&quot; class=&quot;sidebar-section&quot;&gt;&lt;/section&gt;&#10;      &lt;/aside&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div id=&quot;detail-panel&quot; aria-hidden=&quot;true&quot;&gt;&#10;      &lt;div class=&quot;panel-content&quot; role=&quot;dialog&quot; aria-modal=&quot;true&quot; aria-labelledby=&quot;panel-title&quot;&gt;&#10;        &lt;button class=&quot;close-detail&quot; type=&quot;button&quot; aria-label=&quot;Fenster schließen&quot;&gt;×&lt;/button&gt;&#10;        &lt;header class=&quot;panel-header&quot;&gt;&#10;          &lt;h2 id=&quot;panel-title&quot;&gt;&lt;/h2&gt;&#10;          &lt;p id=&quot;panel-subtitle&quot;&gt;&lt;/p&gt;&#10;        &lt;/header&gt;&#10;        &lt;div id=&quot;org-selector&quot; role=&quot;radiogroup&quot; aria-label=&quot;Geschäftsbereich&quot;&gt;&lt;/div&gt;&#10;        &lt;div id=&quot;panel-body&quot;&gt;&lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src=&quot;vendor/d3.min.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;data/world-geojson.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;scripts/data.js&quot;&gt;&lt;/script&gt;&#10;    &lt;script src=&quot;scripts/app.js&quot;&gt;&lt;/script&gt;&#10;  &lt;/body&gt;&#10;&lt;/html&gt;\" />\r\n            </PendingDiffInfo>\r\n          </value>\r\n        </entry>\r\n        <entry key=\"$PROJECT_DIR$/styles.custom.example.css\">\r\n          <value>\r\n            <PendingDiffInfo>\r\n              <option name=\"filePath\" value=\"$PROJECT_DIR$/styles.custom.example.css\" />\r\n              <option name=\"originalContent\" value=\"&#10;\" />\r\n              <option name=\"updatedContent\" value=\"/* styles.custom.example.css&#10;&#10;Kopie dieser Datei als `styles.custom.css` in das Projekt-Root,&#10;und die Datei wird automatisch geladen (und ist in .gitignore).&#10;&#10;Beispiele:&#10;- Überschreibe CSS-Variablen&#10;- Ändere Abstände oder Farben&#10;- Passe das Logo an&#10;&#10;Wichtiger Hinweis: Die Datei `styles.custom.css` wird nicht im Repo landen&#10;(sie ist in .gitignore). Nutze sie für lokale Anpassungen.&#10;*/&#10;&#10;/* ------------------------------------------------------------------&#10;   Beispiel 1: Variable überschreiben (Größe von Logo &amp; Chips anpassen)&#10;   Entferne die umgebenden /* */-Marker, um den Block zu aktivieren.&#10;   ------------------------------------------------------------------ */&#10;/*&#10;:root {&#10;  --chip-height: 48px; /* macht das Logo und die Chips größer */&#10;}&#10;*/&#10;&#10;/* ------------------------------------------------------------------&#10;   Beispiel 2: Logo-Abstand zentral in CSS (anstatt Inline-Style)&#10;   ------------------------------------------------------------------ */&#10;/*&#10;#brand-logo {&#10;  margin-right: 10px;&#10;}&#10;*/&#10;&#10;/* ------------------------------------------------------------------&#10;   Beispiel 3: Ersten Chip hervorheben&#10;   ------------------------------------------------------------------ */&#10;/*&#10;.chip:first-child {&#10;  background: rgba(255, 255, 255, 0.32);&#10;  border-color: rgba(255, 255, 255, 0.40);&#10;}&#10;*/&#10;&#10;/* ------------------------------------------------------------------&#10;   Beispiel 4: Mobile-Override (kleinere Chips auf schmalen Viewports)&#10;   ------------------------------------------------------------------ */&#10;/*&#10;@media (max-width: 768px) {&#10;  :root { --chip-height: 40px; }&#10;}&#10;*/\" />\r\n            </PendingDiffInfo>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/copilotDiffState.xml b/.idea/copilotDiffState.xml
--- a/.idea/copilotDiffState.xml	(revision 39111da0c5cef90353b52e334b697e8d8f08bdfe)
+++ b/.idea/copilotDiffState.xml	(date 1760863265353)
@@ -21,6 +21,15 @@
             </PendingDiffInfo>
           </value>
         </entry>
+        <entry key="$PROJECT_DIR$/scripts/app.js">
+          <value>
+            <PendingDiffInfo>
+              <option name="filePath" value="$PROJECT_DIR$/scripts/app.js" />
+              <option name="originalContent" value="(async () =&gt; {&#10;  const state = {&#10;    level: &quot;world&quot;,&#10;    continent: null,&#10;    country: null,&#10;    selectedPoint: null,&#10;    selectedOrg: ORG_OPTIONS[0]&#10;  };&#10;&#10;  // Runtime configuration loader (tries config.json, falls back to config.example.json)&#10;  async function loadRuntimeConfig() {&#10;    async function tryFetch(path) {&#10;      try {&#10;        const res = await fetch(path, { cache: &quot;no-store&quot; });&#10;        if (!res.ok) return null;&#10;        // First try structured JSON parse; if the file contains comments, fall back to stripping them.&#10;        const text = await res.text();&#10;        try {&#10;          return JSON.parse(text);&#10;        } catch (err) {&#10;          // remove // line comments and /* block comments */ and try again&#10;          const stripped = text.replace(/\/\/.*$/gm, &quot;&quot;).replace(/\/\*[\s\S]*?\*\//gm, &quot;&quot;);&#10;          try {&#10;            return JSON.parse(stripped);&#10;          } catch (err2) {&#10;            return null;&#10;          }&#10;        }&#10;      } catch (e) {&#10;        // ignore&#10;      }&#10;      return null;&#10;    }&#10;&#10;    const fromConfig = await tryFetch(&quot;config.json&quot;);&#10;    if (fromConfig) {&#10;      fromConfig.__configSource = &quot;config.json&quot;;&#10;      return fromConfig;&#10;    }&#10;    const fromExample = await tryFetch(&quot;config.example.json&quot;);&#10;    if (fromExample) {&#10;      fromExample.__configSource = &quot;config.example.json&quot;;&#10;      return fromExample;&#10;    }&#10;    return { __configSource: &quot;none&quot; };&#10;  }&#10;&#10;  function applyRuntimeConfig(cfg) {&#10;    if (!cfg) return;&#10;    try {&#10;      if (cfg.documentTitle) {&#10;        const titleEl = document.getElementById(&quot;document-title&quot;);&#10;        if (titleEl) titleEl.textContent = cfg.documentTitle;&#10;        document.title = cfg.documentTitle;&#10;      } else if (cfg.companyName) {&#10;        const title = `${cfg.companyName} · Interaktive Konzern-Weltkarte`;&#10;        const titleEl = document.getElementById(&quot;document-title&quot;);&#10;        if (titleEl) titleEl.textContent = title;&#10;        document.title = title;&#10;      }&#10;&#10;      if (cfg.favicon) {&#10;        // remove existing icon links to avoid conflicts and caching oddities&#10;        document.querySelectorAll('link[rel~=&quot;icon&quot;], link[rel~=&quot;shortcut icon&quot;]').forEach((n) =&gt; n.parentNode &amp;&amp; n.parentNode.removeChild(n));&#10;        const head = document.getElementsByTagName('head')[0] || document.documentElement;&#10;        const href = `${cfg.favicon}${cfg.favicon.includes('?') ? '&amp;' : '?'}v=${Date.now()}`;&#10;        // standard icon&#10;        const newLink = document.createElement('link');&#10;        newLink.id = 'favicon-link';&#10;        newLink.rel = 'icon';&#10;        newLink.type = 'image/x-icon';&#10;        newLink.href = href;&#10;        head.appendChild(newLink);&#10;        // legacy shortcut icon for some platforms/browsers&#10;        const newLink2 = document.createElement('link');&#10;        newLink2.rel = 'shortcut icon';&#10;        newLink2.type = 'image/x-icon';&#10;        newLink2.href = href;&#10;        head.appendChild(newLink2);&#10;      }&#10;&#10;      if (cfg.logo) {&#10;        const img = document.getElementById(&quot;brand-logo&quot;);&#10;        if (img) {&#10;          img.src = cfg.logo;&#10;          img.style.display = &quot;&quot;;&#10;        }&#10;      }&#10;&#10;      if (cfg.siteTitle) {&#10;        const el = document.getElementById(&quot;site-title&quot;);&#10;        if (el) el.textContent = cfg.siteTitle;&#10;      }&#10;&#10;      if (cfg.subtitle) {&#10;        const el = document.getElementById(&quot;site-subtitle&quot;);&#10;        if (el) el.textContent = cfg.subtitle;&#10;      }&#10;    } catch (e) {&#10;      console.warn(&quot;Applying runtime config failed&quot;, e);&#10;    }&#10;  }&#10;&#10;  const RUNTIME_CONFIG = await loadRuntimeConfig();&#10;  console.info(&quot;Loaded runtime config from:&quot;, RUNTIME_CONFIG.__configSource || &quot;unknown&quot;, RUNTIME_CONFIG);&#10;  applyRuntimeConfig(RUNTIME_CONFIG);&#10;&#10;  const mapContainer = document.getElementById(&quot;map&quot;);&#10;  const detailPanel = document.getElementById(&quot;detail-panel&quot;);&#10;  const panelTitle = document.getElementById(&quot;panel-title&quot;);&#10;  const panelSubtitle = document.getElementById(&quot;panel-subtitle&quot;);&#10;  const panelBody = document.getElementById(&quot;panel-body&quot;);&#10;  const orgSelector = document.getElementById(&quot;org-selector&quot;);&#10;  const resetButton = document.getElementById(&quot;reset-view&quot;);&#10;  const tooltip = document.getElementById(&quot;map-tooltip&quot;);&#10;  const continentSummary = document.getElementById(&quot;continent-summary&quot;);&#10;  const countryList = document.getElementById(&quot;country-list&quot;);&#10;  const breadcrumb = document.getElementById(&quot;breadcrumb&quot;);&#10;  const chipsContainer = document.getElementById(&quot;continent-chips&quot;);&#10;&#10;  const svg = d3.select(mapContainer).append(&quot;svg&quot;);&#10;  const defs = svg.append(&quot;defs&quot;);&#10;  const dropShadowFilter = defs&#10;    .append(&quot;filter&quot;)&#10;    .attr(&quot;id&quot;, &quot;map-drop-shadow&quot;)&#10;    .attr(&quot;x&quot;, &quot;-35%&quot;)&#10;    .attr(&quot;y&quot;, &quot;-35%&quot;)&#10;    .attr(&quot;width&quot;, &quot;170%&quot;)&#10;    .attr(&quot;height&quot;, &quot;170%&quot;)&#10;    .attr(&quot;color-interpolation-filters&quot;, &quot;sRGB&quot;);&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feGaussianBlur&quot;)&#10;    .attr(&quot;in&quot;, &quot;SourceAlpha&quot;)&#10;    .attr(&quot;stdDeviation&quot;, 6)&#10;    .attr(&quot;result&quot;, &quot;shadow&quot;);&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feOffset&quot;)&#10;    .attr(&quot;in&quot;, &quot;shadow&quot;)&#10;    .attr(&quot;dx&quot;, 0)&#10;    .attr(&quot;dy&quot;, 0)&#10;    .attr(&quot;result&quot;, &quot;offset-shadow&quot;);&#10;&#10;  const rootStyles = getComputedStyle(document.documentElement);&#10;  &#10;  // Suggestion: Read glow color from CSS variable, fallback to white&#10;    dropShadowFilter&#10;        .append(&quot;feFlood&quot;)&#10;        .attr(&quot;flood-color&quot;, &quot;#ffffff&quot;)&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feComposite&quot;)&#10;    .attr(&quot;in&quot;, &quot;shadow-color&quot;)&#10;    .attr(&quot;in2&quot;, &quot;offset-shadow&quot;)&#10;    .attr(&quot;operator&quot;, &quot;in&quot;)&#10;    .attr(&quot;result&quot;, &quot;glow&quot;);&#10;&#10;  const dropShadowMerge = dropShadowFilter.append(&quot;feMerge&quot;);&#10;  dropShadowMerge.append(&quot;feMergeNode&quot;).attr(&quot;in&quot;, &quot;glow&quot;);&#10;  dropShadowMerge.append(&quot;feMergeNode&quot;).attr(&quot;in&quot;, &quot;SourceGraphic&quot;);&#10;  const backgroundGlowStrong =&#10;    rootStyles.getPropertyValue(&quot;--map-background-glow-strong&quot;)?.trim() || &quot;rgba(255, 255, 255, 0.35)&quot;;&#10;  const backgroundGlowSoft =&#10;    rootStyles.getPropertyValue(&quot;--map-background-glow-soft&quot;)?.trim() || &quot;rgba(255, 255, 255, 0.12)&quot;;&#10;&#10;  const backgroundGradient = defs&#10;    .append(&quot;radialGradient&quot;)&#10;    .attr(&quot;id&quot;, &quot;map-background-gradient&quot;)&#10;    .attr(&quot;cx&quot;, &quot;50%&quot;)&#10;    .attr(&quot;cy&quot;, &quot;45%&quot;)&#10;    .attr(&quot;r&quot;, &quot;65%&quot;);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;0%&quot;).attr(&quot;stop-color&quot;, backgroundGlowStrong);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;60%&quot;).attr(&quot;stop-color&quot;, backgroundGlowSoft);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;100%&quot;).attr(&quot;stop-color&quot;, &quot;rgba(255, 255, 255, 0)&quot;);&#10;&#10;  const clipPath = defs.append(&quot;clipPath&quot;).attr(&quot;id&quot;, &quot;map-clip&quot;);&#10;  const clipPathRect = clipPath.append(&quot;rect&quot;);&#10;&#10;  const projection = d3.geoNaturalEarth1();&#10;  const geoPath = d3.geoPath(projection);&#10;&#10;  const backgroundRect = svg&#10;    .append(&quot;rect&quot;)&#10;    .attr(&quot;class&quot;, &quot;map-background&quot;)&#10;    .attr(&quot;fill&quot;, &quot;url(#map-background-gradient)&quot;);&#10;&#10;  const mapLayer = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;map-layer&quot;).attr(&quot;clip-path&quot;, &quot;url(#map-clip)&quot;);&#10;  const countriesLayer = mapLayer.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;countries-layer&quot;);&#10;&#10;  const pointsLayer = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;points-layer&quot;).attr(&quot;clip-path&quot;, &quot;url(#map-clip)&quot;);&#10;&#10;  const zoom = d3&#10;    .zoom()&#10;    .scaleExtent([1, 10])&#10;    .on(&quot;zoom&quot;, handleZoom);&#10;&#10;  svg.call(zoom);&#10;  svg.on(&quot;dblclick.zoom&quot;, null);&#10;  svg.on(&quot;dblclick&quot;, () =&gt; {&#10;    resetView();&#10;  });&#10;&#10;  let currentTransform = d3.zoomIdentity;&#10;  let width = mapContainer.clientWidth || 800;&#10;  let height = mapContainer.clientHeight || 600;&#10;&#10;  function normalizeFeatureOrientation(feature) {&#10;    if (!feature?.geometry) {&#10;      return feature;&#10;    }&#10;&#10;    const area = d3.geoArea(feature);&#10;    if (!Number.isFinite(area) || area &lt;= 2 * Math.PI) {&#10;      return feature;&#10;    }&#10;&#10;    const flipRing = (ring) =&gt; (Array.isArray(ring) ? ring.slice().reverse() : ring);&#10;    const geometry = feature.geometry;&#10;&#10;    if (geometry.type === &quot;Polygon&quot;) {&#10;      geometry.coordinates = geometry.coordinates.map(flipRing);&#10;    } else if (geometry.type === &quot;MultiPolygon&quot;) {&#10;      geometry.coordinates = geometry.coordinates.map((polygon) =&gt; polygon.map(flipRing));&#10;    }&#10;&#10;    return feature;&#10;  }&#10;&#10;  const worldFeatures = WORLD_GEOJSON.features&#10;    .filter((feature) =&gt; feature.id !== &quot;ATA&quot;)&#10;    .map(normalizeFeatureOrientation);&#10;  const worldView = { type: &quot;FeatureCollection&quot;, features: worldFeatures };&#10;  const featureByIso = new Map(worldFeatures.map((feature) =&gt; [feature.id, feature]));&#10;&#10;  function isCountryActive(iso) {&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    return !!(config &amp;&amp; config.active);&#10;  }&#10;&#10;  function updateProjection() {&#10;    width = mapContainer.clientWidth || mapContainer.offsetWidth || 800;&#10;    height = mapContainer.clientHeight || mapContainer.offsetHeight || 600;&#10;    svg.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height);&#10;&#10;    projection.fitExtent(&#10;      [&#10;        [40, 40],&#10;        [width - 40, height - 40]&#10;      ],&#10;      worldView&#10;    );&#10;&#10;    backgroundRect.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height).attr(&quot;x&quot;, 0).attr(&quot;y&quot;, 0);&#10;    clipPathRect.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height).attr(&quot;x&quot;, 0).attr(&quot;y&quot;, 0);&#10;&#10;    const bounds = geoPath.bounds(worldView);&#10;    if (bounds &amp;&amp; bounds.length === 2) {&#10;      const padding = 20;&#10;      const [[x0, y0], [x1, y1]] = bounds;&#10;      if ([x0, y0, x1, y1].every((value) =&gt; Number.isFinite(value))) {&#10;        zoom&#10;          .extent([&#10;            [0, 0],&#10;            [width, height]&#10;          ])&#10;          .translateExtent([&#10;            [x0 - padding, y0 - padding],&#10;            [x1 + padding, y1 + padding]&#10;          ]);&#10;      }&#10;    }&#10;&#10;    countriesLayer.selectAll(&quot;path&quot;).attr(&quot;d&quot;, geoPath);&#10;    updatePointPositions();&#10;    svg.call(zoom.transform, currentTransform);&#10;  }&#10;&#10;  function drawCountries() {&#10;    const countrySelection = countriesLayer.selectAll(&quot;path&quot;).data(worldFeatures, (d) =&gt; d.id);&#10;&#10;    const entered = countrySelection&#10;      .enter()&#10;      .append(&quot;path&quot;)&#10;      .attr(&quot;class&quot;, &quot;country&quot;)&#10;      .attr(&quot;d&quot;, geoPath)&#10;      .on(&quot;mousemove&quot;, handleMouseMove)&#10;      .on(&quot;mouseleave&quot;, handleMouseLeave)&#10;      .on(&quot;click&quot;, handleCountryClick);&#10;&#10;    countrySelection.exit().remove();&#10;&#10;    countrySelection.merge(entered).attr(&quot;d&quot;, geoPath);&#10;    updateCountryClasses();&#10;    updateStrokeWidths();&#10;  }&#10;&#10;  function handleMouseMove(event, feature) {&#10;    const iso = feature.id;&#10;    const countryConfig = COUNTRY_BY_ISO.get(iso);&#10;    const [x, y] = d3.pointer(event, mapContainer);&#10;&#10;    tooltip.style.left = `${x}px`;&#10;    tooltip.style.top = `${y}px`;&#10;    if (countryConfig) {&#10;      tooltip.textContent = `${countryConfig.name}${countryConfig.active ? &quot; · aktiv&quot; : &quot; · in Vorbereitung&quot;}`;&#10;    } else {&#10;      tooltip.textContent = feature.properties?.name || iso;&#10;    }&#10;    tooltip.classList.add(&quot;is-visible&quot;);&#10;  }&#10;&#10;  function handleMouseLeave() {&#10;    tooltip.classList.remove(&quot;is-visible&quot;);&#10;  }&#10;&#10;  function handleCountryClick(event, feature) {&#10;    event.stopPropagation();&#10;    const iso = feature.id;&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    if (!config || !config.active) {&#10;      return;&#10;    }&#10;&#10;    if (state.level === &quot;world&quot;) {&#10;      focusContinent(config.continent, { highlightCountry: iso });&#10;    } else {&#10;      focusCountry(iso);&#10;    }&#10;  }&#10;&#10;  function handleZoom(event) {&#10;    currentTransform = event.transform;&#10;    mapLayer.attr(&quot;transform&quot;, currentTransform);&#10;    updatePointTransforms();&#10;    updateStrokeWidths();&#10;  }&#10;&#10;  function updateStrokeWidths() {&#10;    const scaleFactor = Math.sqrt(currentTransform.k || 1);&#10;    countriesLayer.selectAll(&quot;path&quot;).style(&quot;stroke-width&quot;, 0.6 / scaleFactor);&#10;  }&#10;&#10;  function updateCountryClasses() {&#10;    countriesLayer.selectAll(&quot;path&quot;).each(function (feature) {&#10;      const iso = feature.id;&#10;      const selection = d3.select(this);&#10;      const config = COUNTRY_BY_ISO.get(iso);&#10;      const isActive = !!(config &amp;&amp; config.active);&#10;      const highlight = state.country&#10;        ? iso === state.country&#10;        : state.continent&#10;        ? isActive &amp;&amp; config &amp;&amp; config.continent === state.continent&#10;        : false;&#10;&#10;      selection.classed(&quot;is-active&quot;, isActive);&#10;      selection.classed(&quot;is-inactive&quot;, !isActive);&#10;      selection.classed(&quot;is-highlighted&quot;, highlight);&#10;    });&#10;  }&#10;&#10;  function focusContinent(continentName, options = {}) {&#10;    const continent = DATA_CONFIG.continents[continentName];&#10;    if (!continent) return;&#10;&#10;    state.level = &quot;continent&quot;;&#10;    state.continent = continentName;&#10;    state.country = null;&#10;    state.selectedPoint = null;&#10;&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList(options.highlightCountry);&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;    updatePoints(null);&#10;&#10;    const features = continent.countries&#10;      .map((iso) =&gt; featureByIso.get(iso))&#10;      .filter(Boolean);&#10;&#10;    const shouldAnimate = options.animate !== false;&#10;&#10;    if (features.length) {&#10;      zoomToCollection({ type: &quot;FeatureCollection&quot;, features }, shouldAnimate);&#10;    } else {&#10;      zoomToWorld(shouldAnimate);&#10;    }&#10;  }&#10;&#10;  function focusCountry(iso, options = {}) {&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    if (!config || !config.active) return;&#10;&#10;    state.level = &quot;country&quot;;&#10;    state.continent = config.continent;&#10;    state.country = iso;&#10;    state.selectedPoint = null;&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList();&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;&#10;    updatePoints(iso);&#10;&#10;    const feature = featureByIso.get(iso);&#10;    if (feature) {&#10;      zoomToCollection({ type: &quot;FeatureCollection&quot;, features: [feature] }, options.animate !== false);&#10;    }&#10;  }&#10;&#10;  function zoomToWorld(animate = true) {&#10;    if (animate) {&#10;      svg.transition().duration(900).call(zoom.transform, d3.zoomIdentity);&#10;    } else {&#10;      svg.call(zoom.transform, d3.zoomIdentity);&#10;    }&#10;  }&#10;&#10;  function zoomToCollection(collection, animate = true) {&#10;    const bounds = geoPath.bounds(collection);&#10;    const dx = bounds[1][0] - bounds[0][0];&#10;    const dy = bounds[1][1] - bounds[0][1];&#10;    const x = (bounds[0][0] + bounds[1][0]) / 2;&#10;    const y = (bounds[0][1] + bounds[1][1]) / 2;&#10;&#10;    if (!dx || !dy) {&#10;      zoomToWorld(animate);&#10;      return;&#10;    }&#10;&#10;    const [minScale, maxScale] = zoom.scaleExtent();&#10;    const targetScale = Math.min(8, 0.9 / Math.max(dx / width, dy / height));&#10;    const scale = Math.max(minScale, Math.min(maxScale, targetScale));&#10;    const translate = [width / 2 - scale * x, height / 2 - scale * y];&#10;    const transform = d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale);&#10;&#10;    if (animate) {&#10;      svg.transition().duration(900).call(zoom.transform, transform);&#10;    } else {&#10;      svg.call(zoom.transform, transform);&#10;    }&#10;  }&#10;&#10;  function updatePoints(countryIso) {&#10;    const dataPoints = countryIso ? COUNTRY_BY_ISO.get(countryIso)?.points || [] : [];&#10;&#10;    const selection = pointsLayer.selectAll(&quot;.data-point&quot;).data(dataPoints, (d) =&gt; d.id);&#10;&#10;    selection&#10;      .exit()&#10;      .transition()&#10;      .duration(300)&#10;      .style(&quot;opacity&quot;, 0)&#10;      .remove();&#10;&#10;    const entered = selection&#10;      .enter()&#10;      .append(&quot;g&quot;)&#10;      .attr(&quot;class&quot;, &quot;data-point&quot;)&#10;      .style(&quot;opacity&quot;, 0)&#10;      .on(&quot;click&quot;, function (event, d) {&#10;        event.stopPropagation();&#10;        const countryConfig = COUNTRY_BY_ISO.get(countryIso);&#10;        openDetailPanel(d, countryConfig);&#10;      });&#10;&#10;    entered.append(&quot;circle&quot;).attr(&quot;class&quot;, &quot;point-ring&quot;).attr(&quot;r&quot;, 32);&#10;    entered.append(&quot;circle&quot;).attr(&quot;class&quot;, &quot;point-core&quot;).attr(&quot;r&quot;, 20);&#10;    &#10;    // Add SVG icon instead of text&#10;    // SVG icons are 24x24, centered at origin with scale ~0.83 to fit in 20px core circle&#10;    const ICON_SIZE = 24;&#10;    const ICON_OFFSET = -ICON_SIZE / 2;&#10;    const ICON_SCALE = 0.83;&#10;    &#10;    const iconGroup = entered.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;point-icon&quot;);&#10;    iconGroup&#10;      .append(&quot;path&quot;)&#10;      .attr(&quot;d&quot;, (d) =&gt; SVG_ICONS[DATA_CONFIG.categories[d.category]?.icon] || &quot;&quot;)&#10;      .attr(&quot;transform&quot;, `translate(${ICON_OFFSET}, ${ICON_OFFSET}) scale(${ICON_SCALE})`)&#10;      .attr(&quot;fill&quot;, &quot;#0b162f&quot;);&#10;    &#10;    entered.append(&quot;title&quot;).text((d) =&gt; d.title);&#10;&#10;    const merged = entered.merge(selection);&#10;&#10;    merged.each(function (d) {&#10;      d.countryIso = countryIso;&#10;      if (!Array.isArray(d.coordinates) || d.coordinates.length !== 2) return;&#10;      d.projected = projection(d.coordinates);&#10;      const [px, py] = currentTransform.apply(d.projected);&#10;      const category = DATA_CONFIG.categories[d.category];&#10;      const color = category?.color || &quot;#ffffff&quot;;&#10;      d3.select(this)&#10;        .classed(&quot;coming-soon&quot;, !!d.comingSoon)&#10;        .attr(&quot;transform&quot;, `translate(${px},${py})`)&#10;        .style(&quot;opacity&quot;, 1)&#10;        .select(&quot;circle.point-core&quot;)&#10;        .attr(&quot;fill&quot;, color);&#10;    });&#10;&#10;    highlightSelectedPoint(null);&#10;  }&#10;&#10;  function updatePointPositions() {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).each(function (d) {&#10;      if (!Array.isArray(d.coordinates)) return;&#10;      d.projected = projection(d.coordinates);&#10;    });&#10;  }&#10;&#10;  function updatePointTransforms() {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).each(function (d) {&#10;      if (!d.projected) return;&#10;      const [x, y] = currentTransform.apply(d.projected);&#10;      d3.select(this).attr(&quot;transform&quot;, `translate(${x},${y})`);&#10;    });&#10;  }&#10;&#10;  function renderContinentSummary() {&#10;    continentSummary.innerHTML = &quot;&quot;;&#10;&#10;    if (state.country) {&#10;      const countryConfig = COUNTRY_BY_ISO.get(state.country);&#10;      if (!countryConfig) return;&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = countryConfig.name;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.textContent = countryConfig.overview || &quot;Keine Übersicht verfügbar.&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;    } else if (state.continent) {&#10;      const info = DATA_CONFIG.continents[state.continent];&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = state.continent;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.textContent = info?.description || &quot;Keine Beschreibung verfügbar.&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;    } else {&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = &quot;So funktioniert es&quot;;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.innerHTML =&#10;        &quot;&lt;strong&gt;1.&lt;/strong&gt; Kontinent auswählen · &lt;strong&gt;2.&lt;/strong&gt; Land fokussieren · &lt;strong&gt;3.&lt;/strong&gt; Themenpunkt öffnen.&quot;;&#10;      const info = document.createElement(&quot;p&quot;);&#10;      info.textContent = &quot;Alle Kennzahlen lassen sich direkt ohne Backend anpassen (siehe scripts/data.js).&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;      continentSummary.appendChild(info);&#10;    }&#10;  }&#10;&#10;  function renderCountryList(highlightCountry) {&#10;    countryList.innerHTML = &quot;&quot;;&#10;&#10;    if (!state.continent) {&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = &quot;Kontinente&quot;;&#10;      const text = document.createElement(&quot;p&quot;);&#10;      text.textContent = &quot;Nutze die Chips oder klicke auf die Karte, um zu einer Region zu springen.&quot;;&#10;      countryList.appendChild(title);&#10;      countryList.appendChild(text);&#10;      return;&#10;    }&#10;&#10;     const continent = DATA_CONFIG.continents[state.continent];&#10;    const title = document.createElement(&quot;h2&quot;);&#10;    title.textContent = `${state.continent} · Länder`;&#10;    countryList.appendChild(title);&#10;&#10;    const list = document.createElement(&quot;div&quot;);&#10;    list.className = &quot;country-buttons&quot;;&#10;&#10;    continent.countries.forEach((iso) =&gt; {&#10;      const config = COUNTRY_BY_ISO.get(iso);&#10;      const button = document.createElement(&quot;button&quot;);&#10;      button.className = &quot;country-button&quot;;&#10;      button.type = &quot;button&quot;;&#10;&#10;      const name = config?.name || featureByIso.get(iso)?.properties?.name || iso;&#10;      const label = document.createElement(&quot;span&quot;);&#10;      label.textContent = name;&#10;      const status = document.createElement(&quot;small&quot;);&#10;      if (config?.active) {&#10;        status.textContent = &quot;Aktiv&quot;;&#10;      } else {&#10;        status.textContent = &quot;In Vorbereitung&quot;;&#10;      }&#10;&#10;      button.appendChild(label);&#10;      button.appendChild(status);&#10;&#10;      if (!config || !config.active) {&#10;        button.classList.add(&quot;is-disabled&quot;);&#10;        button.disabled = true;&#10;      } else {&#10;        button.addEventListener(&quot;click&quot;, () =&gt; {&#10;          focusCountry(iso);&#10;        });&#10;      }&#10;&#10;      if (state.country === iso) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      } else if (highlightCountry &amp;&amp; highlightCountry === iso) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      }&#10;&#10;      list.appendChild(button);&#10;    });&#10;&#10;    countryList.appendChild(list);&#10;  }&#10;&#10;  function renderLegend() {&#10;    const legend = document.getElementById(&quot;legend&quot;);&#10;    legend.innerHTML = &quot;&quot;;&#10;&#10;    const title = document.createElement(&quot;h2&quot;);&#10;    title.textContent = &quot;Legende&quot;;&#10;    legend.appendChild(title);&#10;&#10;    Object.values(DATA_CONFIG.categories).forEach((value) =&gt; {&#10;      const item = document.createElement(&quot;div&quot;);&#10;      item.className = &quot;legend-item&quot;;&#10;      const swatch = document.createElement(&quot;span&quot;);&#10;      swatch.className = &quot;swatch&quot;;&#10;      swatch.style.background = value.color;&#10;      const textWrapper = document.createElement(&quot;div&quot;);&#10;      const label = document.createElement(&quot;strong&quot;);&#10;      label.textContent = value.label;&#10;      const description = document.createElement(&quot;div&quot;);&#10;      description.textContent = value.description;&#10;      textWrapper.appendChild(label);&#10;      textWrapper.appendChild(description);&#10;      item.appendChild(swatch);&#10;      item.appendChild(textWrapper);&#10;      legend.appendChild(item);&#10;    });&#10;  }&#10;&#10;  function renderContinentChips() {&#10;    chipsContainer.innerHTML = &quot;&quot;;&#10;&#10;    CONTINENT_LIST.forEach((name) =&gt; {&#10;      const chip = document.createElement(&quot;button&quot;);&#10;      chip.type = &quot;button&quot;;&#10;      chip.className = &quot;chip&quot;;&#10;    const activeCount = DATA_CONFIG.continents[name].countries.filter((iso) =&gt; isCountryActive(iso)).length;&#10;    chip.innerHTML = `&lt;span&gt;${name}&lt;/span&gt;&lt;small&gt;${activeCount} Standorte&lt;/small&gt;`;&#10;    chip.addEventListener(&quot;click&quot;, () =&gt; {&#10;      focusContinent(name);&#10;    });&#10;    chipsContainer.appendChild(chip);&#10;  });&#10;&#10;    updateContinentChips();&#10;  }&#10;&#10;  function updateContinentChips() {&#10;    const chipNodes = chipsContainer.querySelectorAll(&quot;.chip&quot;);&#10;    chipNodes.forEach((chip) =&gt; {&#10;      const label = chip.querySelector(&quot;span&quot;)?.textContent || &quot;&quot;;&#10;      chip.classList.toggle(&quot;is-active&quot;, !!state.continent &amp;&amp; label === state.continent);&#10;    });&#10;  }&#10;&#10;  function updateBreadcrumb() {&#10;    breadcrumb.innerHTML = &quot;&quot;;&#10;&#10;    const items = [];&#10;    items.push({ label: &quot;Welt&quot;, action: () =&gt; resetView(), clickable: state.level !== &quot;world&quot; });&#10;    if (state.continent) {&#10;      items.push({&#10;        label: state.continent,&#10;        action: () =&gt; focusContinent(state.continent),&#10;        clickable: state.level === &quot;country&quot;&#10;      });&#10;    }&#10;    if (state.country) {&#10;      const countryName = COUNTRY_BY_ISO.get(state.country)?.name || state.country;&#10;      items.push({ label: countryName, clickable: false });&#10;    }&#10;&#10;    items.forEach((item, index) =&gt; {&#10;      if (index &gt; 0) {&#10;        const separator = document.createElement(&quot;span&quot;);&#10;        separator.textContent = &quot;›&quot;;&#10;        separator.className = &quot;breadcrumb-separator&quot;;&#10;        breadcrumb.appendChild(separator);&#10;      }&#10;&#10;      const wrapper = document.createElement(&quot;span&quot;);&#10;      wrapper.className = &quot;breadcrumb-item&quot;;&#10;&#10;      if (item.clickable) {&#10;        const button = document.createElement(&quot;button&quot;);&#10;        button.type = &quot;button&quot;;&#10;        button.textContent = item.label;&#10;        button.addEventListener(&quot;click&quot;, item.action);&#10;        wrapper.appendChild(button);&#10;      } else {&#10;        const label = document.createElement(&quot;span&quot;);&#10;        label.textContent = item.label;&#10;        wrapper.appendChild(label);&#10;      }&#10;&#10;      breadcrumb.appendChild(wrapper);&#10;    });&#10;  }&#10;&#10;  function highlightSelectedPoint(pointId) {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).classed(&quot;is-selected&quot;, (d) =&gt; d.id === pointId);&#10;    state.selectedPoint = pointId;&#10;  }&#10;&#10;  function renderOrgSelector(point) {&#10;    orgSelector.innerHTML = &quot;&quot;;&#10;&#10;    if (point?.comingSoon) {&#10;      orgSelector.style.display = &quot;none&quot;;&#10;      return;&#10;    }&#10;&#10;    orgSelector.style.display = &quot;flex&quot;;&#10;&#10;    ORG_OPTIONS.forEach((option) =&gt; {&#10;      const button = document.createElement(&quot;button&quot;);&#10;      button.type = &quot;button&quot;;&#10;      button.className = &quot;org-option&quot;;&#10;      button.textContent = option;&#10;      button.setAttribute(&quot;role&quot;, &quot;radio&quot;);&#10;      button.setAttribute(&quot;aria-checked&quot;, option === state.selectedOrg ? &quot;true&quot; : &quot;false&quot;);&#10;      button.addEventListener(&quot;click&quot;, () =&gt; {&#10;        state.selectedOrg = option;&#10;        updateOrgSelector(point);&#10;        updatePanelContent(point);&#10;      });&#10;      if (option === state.selectedOrg) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      }&#10;      orgSelector.appendChild(button);&#10;    });&#10;  }&#10;&#10;  function updateOrgSelector(point) {&#10;    orgSelector.querySelectorAll(&quot;.org-option&quot;).forEach((button) =&gt; {&#10;      const isActive = button.textContent === state.selectedOrg;&#10;      button.setAttribute(&quot;aria-checked&quot;, isActive ? &quot;true&quot; : &quot;false&quot;);&#10;      button.classList.toggle(&quot;is-active&quot;, isActive);&#10;      button.disabled = !!point?.comingSoon;&#10;    });&#10;  }&#10;&#10;  function createMetricCard(metric) {&#10;    const card = document.createElement(&quot;div&quot;);&#10;    card.className = &quot;metric-card&quot;;&#10;    const title = document.createElement(&quot;h3&quot;);&#10;    title.textContent = metric.label;&#10;    const value = document.createElement(&quot;div&quot;);&#10;    value.className = &quot;metric-value&quot;;&#10;    value.textContent = metric.value;&#10;    card.appendChild(title);&#10;    card.appendChild(value);&#10;    if (metric.trend) {&#10;      const trend = document.createElement(&quot;div&quot;);&#10;      trend.className = &quot;metric-trend&quot;;&#10;      trend.textContent = metric.trend;&#10;      if (/^\+/.test(metric.trend)) {&#10;        trend.classList.add(&quot;is-positive&quot;);&#10;      } else if (/^−|-/.test(metric.trend)) {&#10;        trend.classList.add(&quot;is-negative&quot;);&#10;      }&#10;      card.appendChild(trend);&#10;    }&#10;    return card;&#10;  }&#10;&#10;  function renderProgressList(items) {&#10;    const wrapper = document.createElement(&quot;div&quot;);&#10;    wrapper.className = &quot;progress-list&quot;;&#10;    items.forEach((item) =&gt; {&#10;      const block = document.createElement(&quot;div&quot;);&#10;      block.className = &quot;progress-item&quot;;&#10;      const label = document.createElement(&quot;span&quot;);&#10;      label.textContent = item.label;&#10;      const bar = document.createElement(&quot;div&quot;);&#10;      bar.className = &quot;progress-bar&quot;;&#10;      const fill = document.createElement(&quot;div&quot;);&#10;      fill.className = &quot;fill&quot;;&#10;      const value = Math.max(0, Math.min(100, item.value ?? 0));&#10;      fill.style.width = `${value}%`;&#10;      bar.appendChild(fill);&#10;      block.appendChild(label);&#10;      block.appendChild(bar);&#10;      wrapper.appendChild(block);&#10;    });&#10;    return wrapper;&#10;  }&#10;&#10;  function renderCompareGrid(dataset) {&#10;    const grid = document.createElement(&quot;div&quot;);&#10;    grid.className = &quot;compare-grid&quot;;&#10;&#10;    const left = document.createElement(&quot;div&quot;);&#10;    left.className = &quot;compare-column&quot;;&#10;    const leftTitle = document.createElement(&quot;h3&quot;);&#10;    leftTitle.textContent = dataset.leftLabel || &quot;CVS&quot;;&#10;    left.appendChild(leftTitle);&#10;    const leftList = document.createElement(&quot;ul&quot;);&#10;&#10;    const right = document.createElement(&quot;div&quot;);&#10;    right.className = &quot;compare-column&quot;;&#10;    const rightTitle = document.createElement(&quot;h3&quot;);&#10;    rightTitle.textContent = dataset.rightLabel || &quot;RVS&quot;;&#10;    right.appendChild(rightTitle);&#10;    const rightList = document.createElement(&quot;ul&quot;);&#10;&#10;    (dataset.metrics || []).forEach((metric) =&gt; {&#10;      const leftItem = document.createElement(&quot;li&quot;);&#10;      const leftLabel = document.createElement(&quot;span&quot;);&#10;      leftLabel.textContent = metric.label;&#10;      const leftValue = document.createElement(&quot;span&quot;);&#10;      leftValue.className = &quot;value&quot;;&#10;      leftValue.textContent = metric.left ?? &quot;—&quot;;&#10;      leftItem.appendChild(leftLabel);&#10;      leftItem.appendChild(leftValue);&#10;      leftList.appendChild(leftItem);&#10;&#10;      const rightItem = document.createElement(&quot;li&quot;);&#10;      const rightLabel = document.createElement(&quot;span&quot;);&#10;      rightLabel.textContent = metric.label;&#10;      const rightValue = document.createElement(&quot;span&quot;);&#10;      rightValue.className = &quot;value&quot;;&#10;      rightValue.textContent = metric.right ?? &quot;—&quot;;&#10;      rightItem.appendChild(rightLabel);&#10;      rightItem.appendChild(rightValue);&#10;      rightList.appendChild(rightItem);&#10;    });&#10;&#10;    left.appendChild(leftList);&#10;    right.appendChild(rightList);&#10;    grid.appendChild(left);&#10;    grid.appendChild(right);&#10;    return grid;&#10;  }&#10;&#10;  function updatePanelContent(point) {&#10;    panelBody.innerHTML = &quot;&quot;;&#10;&#10;    if (!point) return;&#10;&#10;    if (point.comingSoon) {&#10;      const info = document.createElement(&quot;div&quot;);&#10;      info.className = &quot;coming-soon&quot;;&#10;      info.textContent = &quot;Coming Soon: Datensatz befindet sich in Vorbereitung.&quot;;&#10;      panelBody.appendChild(info);&#10;      return;&#10;    }&#10;&#10;    let dataset;&#10;    if (state.selectedOrg === &quot;CVS vs RVS&quot;) {&#10;      dataset = point.data?.compare;&#10;    } else {&#10;      dataset = point.data?.[state.selectedOrg];&#10;    }&#10;&#10;    if (!dataset) {&#10;      const message = document.createElement(&quot;div&quot;);&#10;      message.className = &quot;no-data&quot;;&#10;      message.textContent = &quot;Kein Datensatz verfügbar.&quot;;&#10;      panelBody.appendChild(message);&#10;      return;&#10;    }&#10;&#10;    if (dataset.summary) {&#10;      const summary = document.createElement(&quot;div&quot;);&#10;      summary.className = &quot;dataset-summary&quot;;&#10;      summary.textContent = dataset.summary;&#10;      panelBody.appendChild(summary);&#10;    }&#10;&#10;    if (state.selectedOrg === &quot;CVS vs RVS&quot;) {&#10;      panelBody.appendChild(renderCompareGrid(dataset));&#10;    } else {&#10;      if (dataset.metrics?.length) {&#10;        const grid = document.createElement(&quot;div&quot;);&#10;        grid.className = &quot;metric-grid&quot;;&#10;        dataset.metrics.forEach((metric) =&gt; {&#10;          grid.appendChild(createMetricCard(metric));&#10;        });&#10;        panelBody.appendChild(grid);&#10;      }&#10;&#10;      if (dataset.progress?.length) {&#10;        panelBody.appendChild(renderProgressList(dataset.progress));&#10;      }&#10;    }&#10;  }&#10;&#10;  function openDetailPanel(point, countryConfig) {&#10;    highlightSelectedPoint(point.id);&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;&#10;    panelTitle.textContent = point.title;&#10;    const category = DATA_CONFIG.categories[point.category];&#10;    panelSubtitle.textContent = `${countryConfig?.name || &quot;&quot;} · ${category?.label || &quot;&quot;}`;&#10;&#10;    renderOrgSelector(point);&#10;    updatePanelContent(point);&#10;&#10;    detailPanel.classList.add(&quot;is-visible&quot;);&#10;    detailPanel.setAttribute(&quot;aria-hidden&quot;, &quot;false&quot;);&#10;  }&#10;&#10;  function hideDetailPanel() {&#10;    detailPanel.classList.remove(&quot;is-visible&quot;);&#10;    detailPanel.setAttribute(&quot;aria-hidden&quot;, &quot;true&quot;);&#10;    highlightSelectedPoint(null);&#10;  }&#10;&#10;  function resetView() {&#10;    state.level = &quot;world&quot;;&#10;    state.continent = null;&#10;    state.country = null;&#10;    state.selectedPoint = null;&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList();&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;    updatePoints(null);&#10;    zoomToWorld(true);&#10;  }&#10;&#10;  function restoreCurrentView() {&#10;    if (state.level === &quot;country&quot; &amp;&amp; state.country) {&#10;      focusCountry(state.country, { animate: false });&#10;    } else if (state.level === &quot;continent&quot; &amp;&amp; state.continent) {&#10;      focusContinent(state.continent, { highlightCountry: state.country, animate: false });&#10;    } else {&#10;      zoomToWorld(false);&#10;    }&#10;  }&#10;&#10;  function handleResize() {&#10;    updateProjection();&#10;    drawCountries();&#10;    updatePointPositions();&#10;    updatePointTransforms();&#10;    restoreCurrentView();&#10;  }&#10;&#10;  document.querySelector(&quot;.close-detail&quot;).addEventListener(&quot;click&quot;, hideDetailPanel);&#10;  detailPanel.addEventListener(&quot;click&quot;, (event) =&gt; {&#10;    if (event.target === detailPanel) {&#10;      hideDetailPanel();&#10;    }&#10;  });&#10;  document.addEventListener(&quot;keydown&quot;, (event) =&gt; {&#10;    if (event.key === &quot;Escape&quot;) {&#10;      hideDetailPanel();&#10;    }&#10;  });&#10;&#10;  resetButton.addEventListener(&quot;click&quot;, () =&gt; resetView());&#10;&#10;  renderLegend();&#10;  renderContinentChips();&#10;  updateProjection();&#10;  drawCountries();&#10;  renderContinentSummary();&#10;  renderCountryList();&#10;  updateBreadcrumb();&#10;  updateCountryClasses();&#10;  zoomToWorld(false);&#10;&#10;  window.addEventListener(&quot;resize&quot;, handleResize);&#10;})();&#10;" />
+              <option name="updatedContent" value="(async () =&gt; {&#10;  const state = {&#10;    level: &quot;world&quot;,&#10;    continent: null,&#10;    country: null,&#10;    selectedPoint: null,&#10;    selectedOrg: ORG_OPTIONS[0]&#10;  };&#10;&#10;  // Runtime configuration loader (tries config.json, falls back to config.example.json)&#10;  async function loadRuntimeConfig() {&#10;    async function tryFetch(path) {&#10;      try {&#10;        const res = await fetch(path, { cache: &quot;no-store&quot; });&#10;        if (!res.ok) return null;&#10;        // First try structured JSON parse; if the file contains comments, fall back to stripping them.&#10;        const text = await res.text();&#10;        try {&#10;          return JSON.parse(text);&#10;        } catch (err) {&#10;          // remove // line comments and /* block comments */ and try again&#10;          const stripped = text.replace(/\/\/.*$/gm, &quot;&quot;).replace(/\/\*[\s\S]*?\*\//gm, &quot;&quot;);&#10;          try {&#10;            return JSON.parse(stripped);&#10;          } catch (err2) {&#10;            return null;&#10;          }&#10;        }&#10;      } catch (e) {&#10;        // ignore&#10;      }&#10;      return null;&#10;    }&#10;&#10;    const fromConfig = await tryFetch(&quot;config.json&quot;);&#10;    if (fromConfig) {&#10;      fromConfig.__configSource = &quot;config.json&quot;;&#10;      return fromConfig;&#10;    }&#10;    const fromExample = await tryFetch(&quot;config.example.json&quot;);&#10;    if (fromExample) {&#10;      fromExample.__configSource = &quot;config.example.json&quot;;&#10;      return fromExample;&#10;    }&#10;    return { __configSource: &quot;none&quot; };&#10;  }&#10;&#10;  function applyRuntimeConfig(cfg) {&#10;    if (!cfg) return;&#10;    try {&#10;      if (cfg.documentTitle) {&#10;        const titleEl = document.getElementById(&quot;document-title&quot;);&#10;        if (titleEl) titleEl.textContent = cfg.documentTitle;&#10;        document.title = cfg.documentTitle;&#10;      } else if (cfg.companyName) {&#10;        const title = `${cfg.companyName} · Interaktive Konzern-Weltkarte`;&#10;        const titleEl = document.getElementById(&quot;document-title&quot;);&#10;        if (titleEl) titleEl.textContent = title;&#10;        document.title = title;&#10;      }&#10;&#10;      if (cfg.favicon) {&#10;        // remove existing icon links to avoid conflicts and caching oddities&#10;        document.querySelectorAll('link[rel~=&quot;icon&quot;], link[rel~=&quot;shortcut icon&quot;]').forEach((n) =&gt; n.parentNode &amp;&amp; n.parentNode.removeChild(n));&#10;        const head = document.getElementsByTagName('head')[0] || document.documentElement;&#10;        const href = `${cfg.favicon}${cfg.favicon.includes('?') ? '&amp;' : '?'}v=${Date.now()}`;&#10;        // standard icon&#10;        const newLink = document.createElement('link');&#10;        newLink.id = 'favicon-link';&#10;        newLink.rel = 'icon';&#10;        newLink.type = 'image/x-icon';&#10;        newLink.href = href;&#10;        head.appendChild(newLink);&#10;        // legacy shortcut icon for some platforms/browsers&#10;        const newLink2 = document.createElement('link');&#10;        newLink2.rel = 'shortcut icon';&#10;        newLink2.type = 'image/x-icon';&#10;        newLink2.href = href;&#10;        head.appendChild(newLink2);&#10;      }&#10;&#10;      if (cfg.logo) {&#10;        const img = document.getElementById(&quot;brand-logo&quot;);&#10;        if (img) {&#10;          img.src = cfg.logo;&#10;          img.style.display = &quot;&quot;;&#10;        }&#10;      }&#10;&#10;      if (cfg.siteTitle) {&#10;        const el = document.getElementById(&quot;site-title&quot;);&#10;        if (el) el.textContent = cfg.siteTitle;&#10;      }&#10;&#10;      if (cfg.subtitle) {&#10;        const el = document.getElementById(&quot;site-subtitle&quot;);&#10;        if (el) el.textContent = cfg.subtitle;&#10;      }&#10;    } catch (e) {&#10;      console.warn(&quot;Applying runtime config failed&quot;, e);&#10;    }&#10;  }&#10;&#10;  const RUNTIME_CONFIG = await loadRuntimeConfig();&#10;  console.info(&quot;Loaded runtime config from:&quot;, RUNTIME_CONFIG.__configSource || &quot;unknown&quot;, RUNTIME_CONFIG);&#10;  applyRuntimeConfig(RUNTIME_CONFIG);&#10;&#10;  const mapContainer = document.getElementById(&quot;map&quot;);&#10;  const detailPanel = document.getElementById(&quot;detail-panel&quot;);&#10;  const panelTitle = document.getElementById(&quot;panel-title&quot;);&#10;  const panelSubtitle = document.getElementById(&quot;panel-subtitle&quot;);&#10;  const panelBody = document.getElementById(&quot;panel-body&quot;);&#10;  const orgSelector = document.getElementById(&quot;org-selector&quot;);&#10;  const resetButton = document.getElementById(&quot;reset-view&quot;);&#10;  const tooltip = document.getElementById(&quot;map-tooltip&quot;);&#10;  const continentSummary = document.getElementById(&quot;continent-summary&quot;);&#10;  const countryList = document.getElementById(&quot;country-list&quot;);&#10;  const breadcrumb = document.getElementById(&quot;breadcrumb&quot;);&#10;  const chipsContainer = document.getElementById(&quot;continent-chips&quot;);&#10;&#10;  const svg = d3.select(mapContainer).append(&quot;svg&quot;);&#10;  const defs = svg.append(&quot;defs&quot;);&#10;  const dropShadowFilter = defs&#10;    .append(&quot;filter&quot;)&#10;    .attr(&quot;id&quot;, &quot;map-drop-shadow&quot;)&#10;    .attr(&quot;x&quot;, &quot;-35%&quot;)&#10;    .attr(&quot;y&quot;, &quot;-35%&quot;)&#10;    .attr(&quot;width&quot;, &quot;170%&quot;)&#10;    .attr(&quot;height&quot;, &quot;170%&quot;)&#10;    .attr(&quot;color-interpolation-filters&quot;, &quot;sRGB&quot;);&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feGaussianBlur&quot;)&#10;    .attr(&quot;in&quot;, &quot;SourceAlpha&quot;)&#10;    .attr(&quot;stdDeviation&quot;, 6)&#10;    .attr(&quot;result&quot;, &quot;shadow&quot;);&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feOffset&quot;)&#10;    .attr(&quot;in&quot;, &quot;shadow&quot;)&#10;    .attr(&quot;dx&quot;, 0)&#10;    .attr(&quot;dy&quot;, 0)&#10;    .attr(&quot;result&quot;, &quot;offset-shadow&quot;);&#10;&#10;  const rootStyles = getComputedStyle(document.documentElement);&#10;  &#10;  // Suggestion: Read glow color from CSS variable, fallback to white&#10;    dropShadowFilter&#10;        .append(&quot;feFlood&quot;)&#10;        .attr(&quot;flood-color&quot;, &quot;#ffffff&quot;)&#10;&#10;  dropShadowFilter&#10;    .append(&quot;feComposite&quot;)&#10;    .attr(&quot;in&quot;, &quot;shadow-color&quot;)&#10;    .attr(&quot;in2&quot;, &quot;offset-shadow&quot;)&#10;    .attr(&quot;operator&quot;, &quot;in&quot;)&#10;    .attr(&quot;result&quot;, &quot;glow&quot;);&#10;&#10;  const dropShadowMerge = dropShadowFilter.append(&quot;feMerge&quot;);&#10;  dropShadowMerge.append(&quot;feMergeNode&quot;).attr(&quot;in&quot;, &quot;glow&quot;);&#10;  dropShadowMerge.append(&quot;feMergeNode&quot;).attr(&quot;in&quot;, &quot;SourceGraphic&quot;);&#10;  const backgroundGlowStrong =&#10;    rootStyles.getPropertyValue(&quot;--map-background-glow-strong&quot;)?.trim() || &quot;rgba(255, 255, 255, 0.35)&quot;;&#10;  const backgroundGlowSoft =&#10;    rootStyles.getPropertyValue(&quot;--map-background-glow-soft&quot;)?.trim() || &quot;rgba(255, 255, 255, 0.12)&quot;;&#10;&#10;  const backgroundGradient = defs&#10;    .append(&quot;radialGradient&quot;)&#10;    .attr(&quot;id&quot;, &quot;map-background-gradient&quot;)&#10;    .attr(&quot;cx&quot;, &quot;50%&quot;)&#10;    .attr(&quot;cy&quot;, &quot;45%&quot;)&#10;    .attr(&quot;r&quot;, &quot;65%&quot;);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;0%&quot;).attr(&quot;stop-color&quot;, backgroundGlowStrong);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;60%&quot;).attr(&quot;stop-color&quot;, backgroundGlowSoft);&#10;  backgroundGradient.append(&quot;stop&quot;).attr(&quot;offset&quot;, &quot;100%&quot;).attr(&quot;stop-color&quot;, &quot;rgba(255, 255, 255, 0)&quot;);&#10;&#10;  const clipPath = defs.append(&quot;clipPath&quot;).attr(&quot;id&quot;, &quot;map-clip&quot;);&#10;  const clipPathRect = clipPath.append(&quot;rect&quot;);&#10;&#10;  const projection = d3.geoNaturalEarth1();&#10;  const geoPath = d3.geoPath(projection);&#10;&#10;  const backgroundRect = svg&#10;    .append(&quot;rect&quot;)&#10;    .attr(&quot;class&quot;, &quot;map-background&quot;)&#10;    .attr(&quot;fill&quot;, &quot;url(#map-background-gradient)&quot;);&#10;&#10;  const mapLayer = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;map-layer&quot;).attr(&quot;clip-path&quot;, &quot;url(#map-clip)&quot;);&#10;  const countriesLayer = mapLayer.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;countries-layer&quot;);&#10;&#10;  const pointsLayer = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;points-layer&quot;).attr(&quot;clip-path&quot;, &quot;url(#map-clip)&quot;);&#10;&#10;  const zoom = d3&#10;    .zoom()&#10;    .scaleExtent([1, 10])&#10;    .on(&quot;zoom&quot;, handleZoom);&#10;&#10;  svg.call(zoom);&#10;  svg.on(&quot;dblclick.zoom&quot;, null);&#10;  svg.on(&quot;dblclick&quot;, () =&gt; {&#10;    resetView();&#10;  });&#10;&#10;  let currentTransform = d3.zoomIdentity;&#10;  let width = mapContainer.clientWidth || 800;&#10;  let height = mapContainer.clientHeight || 600;&#10;&#10;  function normalizeFeatureOrientation(feature) {&#10;    if (!feature?.geometry) {&#10;      return feature;&#10;    }&#10;&#10;    const area = d3.geoArea(feature);&#10;    if (!Number.isFinite(area) || area &lt;= 2 * Math.PI) {&#10;      return feature;&#10;    }&#10;&#10;    const flipRing = (ring) =&gt; (Array.isArray(ring) ? ring.slice().reverse() : ring);&#10;    const geometry = feature.geometry;&#10;&#10;    if (geometry.type === &quot;Polygon&quot;) {&#10;      geometry.coordinates = geometry.coordinates.map(flipRing);&#10;    } else if (geometry.type === &quot;MultiPolygon&quot;) {&#10;      geometry.coordinates = geometry.coordinates.map((polygon) =&gt; polygon.map(flipRing));&#10;    }&#10;&#10;    return feature;&#10;  }&#10;&#10;  const worldFeatures = WORLD_GEOJSON.features&#10;    .filter((feature) =&gt; feature.id !== &quot;ATA&quot;)&#10;    .map(normalizeFeatureOrientation);&#10;  const worldView = { type: &quot;FeatureCollection&quot;, features: worldFeatures };&#10;  const featureByIso = new Map(worldFeatures.map((feature) =&gt; [feature.id, feature]));&#10;&#10;  function isCountryActive(iso) {&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    return !!(config &amp;&amp; config.active);&#10;  }&#10;&#10;  function updateProjection() {&#10;    width = mapContainer.clientWidth || mapContainer.offsetWidth || 800;&#10;    height = mapContainer.clientHeight || mapContainer.offsetHeight || 600;&#10;    svg.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height);&#10;&#10;    projection.fitExtent(&#10;      [&#10;        [40, 40],&#10;        [width - 40, height - 40]&#10;      ],&#10;      worldView&#10;    );&#10;&#10;    backgroundRect.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height).attr(&quot;x&quot;, 0).attr(&quot;y&quot;, 0);&#10;    clipPathRect.attr(&quot;width&quot;, width).attr(&quot;height&quot;, height).attr(&quot;x&quot;, 0).attr(&quot;y&quot;, 0);&#10;&#10;    const bounds = geoPath.bounds(worldView);&#10;    if (bounds &amp;&amp; bounds.length === 2) {&#10;      const padding = 20;&#10;      const [[x0, y0], [x1, y1]] = bounds;&#10;      if ([x0, y0, x1, y1].every((value) =&gt; Number.isFinite(value))) {&#10;        zoom&#10;          .extent([&#10;            [0, 0],&#10;            [width, height]&#10;          ])&#10;          .translateExtent([&#10;            [x0 - padding, y0 - padding],&#10;            [x1 + padding, y1 + padding]&#10;          ]);&#10;      }&#10;    }&#10;&#10;    countriesLayer.selectAll(&quot;path&quot;).attr(&quot;d&quot;, geoPath);&#10;    updatePointPositions();&#10;    svg.call(zoom.transform, currentTransform);&#10;  }&#10;&#10;  function drawCountries() {&#10;    const countrySelection = countriesLayer.selectAll(&quot;path&quot;).data(worldFeatures, (d) =&gt; d.id);&#10;&#10;    const entered = countrySelection&#10;      .enter()&#10;      .append(&quot;path&quot;)&#10;      .attr(&quot;class&quot;, &quot;country&quot;)&#10;      .attr(&quot;d&quot;, geoPath)&#10;      .on(&quot;mousemove&quot;, handleMouseMove)&#10;      .on(&quot;mouseleave&quot;, handleMouseLeave)&#10;      .on(&quot;click&quot;, handleCountryClick);&#10;&#10;    countrySelection.exit().remove();&#10;&#10;    countrySelection.merge(entered).attr(&quot;d&quot;, geoPath);&#10;    updateCountryClasses();&#10;    updateStrokeWidths();&#10;  }&#10;&#10;  function handleMouseMove(event, feature) {&#10;    const iso = feature.id;&#10;    const countryConfig = COUNTRY_BY_ISO.get(iso);&#10;    const [x, y] = d3.pointer(event, mapContainer);&#10;&#10;    tooltip.style.left = `${x}px`;&#10;    tooltip.style.top = `${y}px`;&#10;    if (countryConfig) {&#10;      tooltip.textContent = `${countryConfig.name}${countryConfig.active ? &quot; · aktiv&quot; : &quot; · in Vorbereitung&quot;}`;&#10;    } else {&#10;      tooltip.textContent = feature.properties?.name || iso;&#10;    }&#10;    tooltip.classList.add(&quot;is-visible&quot;);&#10;  }&#10;&#10;  function handleMouseLeave() {&#10;    tooltip.classList.remove(&quot;is-visible&quot;);&#10;  }&#10;&#10;  function handleCountryClick(event, feature) {&#10;    event.stopPropagation();&#10;    const iso = feature.id;&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    if (!config || !config.active) {&#10;      return;&#10;    }&#10;&#10;    if (state.level === &quot;world&quot;) {&#10;      focusContinent(config.continent, { highlightCountry: iso });&#10;    } else {&#10;      focusCountry(iso);&#10;    }&#10;  }&#10;&#10;  function handleZoom(event) {&#10;    currentTransform = event.transform;&#10;    mapLayer.attr(&quot;transform&quot;, currentTransform);&#10;    updatePointTransforms();&#10;    updateStrokeWidths();&#10;  }&#10;&#10;  function updateStrokeWidths() {&#10;    const scaleFactor = Math.sqrt(currentTransform.k || 1);&#10;    countriesLayer.selectAll(&quot;path&quot;).style(&quot;stroke-width&quot;, 0.6 / scaleFactor);&#10;  }&#10;&#10;  function updateCountryClasses() {&#10;    countriesLayer.selectAll(&quot;path&quot;).each(function (feature) {&#10;      const iso = feature.id;&#10;      const selection = d3.select(this);&#10;      const config = COUNTRY_BY_ISO.get(iso);&#10;      const isActive = !!(config &amp;&amp; config.active);&#10;      const highlight = state.country&#10;        ? iso === state.country&#10;        : state.continent&#10;        ? isActive &amp;&amp; config &amp;&amp; config.continent === state.continent&#10;        : false;&#10;&#10;      selection.classed(&quot;is-active&quot;, isActive);&#10;      selection.classed(&quot;is-inactive&quot;, !isActive);&#10;      selection.classed(&quot;is-highlighted&quot;, highlight);&#10;    });&#10;  }&#10;&#10;  function focusContinent(continentName, options = {}) {&#10;    const continent = DATA_CONFIG.continents[continentName];&#10;    if (!continent) return;&#10;&#10;    state.level = &quot;continent&quot;;&#10;    state.continent = continentName;&#10;    state.country = null;&#10;    state.selectedPoint = null;&#10;&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList(options.highlightCountry);&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;    updatePoints(null);&#10;&#10;    const features = continent.countries&#10;      .map((iso) =&gt; featureByIso.get(iso))&#10;      .filter(Boolean);&#10;&#10;    const shouldAnimate = options.animate !== false;&#10;&#10;    if (features.length) {&#10;      zoomToCollection({ type: &quot;FeatureCollection&quot;, features }, shouldAnimate);&#10;    } else {&#10;      zoomToWorld(shouldAnimate);&#10;    }&#10;  }&#10;&#10;  function focusCountry(iso, options = {}) {&#10;    const config = COUNTRY_BY_ISO.get(iso);&#10;    if (!config || !config.active) return;&#10;&#10;    state.level = &quot;country&quot;;&#10;    state.continent = config.continent;&#10;    state.country = iso;&#10;    state.selectedPoint = null;&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList();&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;&#10;    updatePoints(iso);&#10;&#10;    const feature = featureByIso.get(iso);&#10;    if (feature) {&#10;      zoomToCollection({ type: &quot;FeatureCollection&quot;, features: [feature] }, options.animate !== false);&#10;    }&#10;  }&#10;&#10;  function zoomToWorld(animate = true) {&#10;    if (animate) {&#10;      svg.transition().duration(900).call(zoom.transform, d3.zoomIdentity);&#10;    } else {&#10;      svg.call(zoom.transform, d3.zoomIdentity);&#10;    }&#10;  }&#10;&#10;  function zoomToCollection(collection, animate = true) {&#10;    const bounds = geoPath.bounds(collection);&#10;    const dx = bounds[1][0] - bounds[0][0];&#10;    const dy = bounds[1][1] - bounds[0][1];&#10;    const x = (bounds[0][0] + bounds[1][0]) / 2;&#10;    const y = (bounds[0][1] + bounds[1][1]) / 2;&#10;&#10;    if (!dx || !dy) {&#10;      zoomToWorld(animate);&#10;      return;&#10;    }&#10;&#10;    const [minScale, maxScale] = zoom.scaleExtent();&#10;    const targetScale = Math.min(8, 0.9 / Math.max(dx / width, dy / height));&#10;    const scale = Math.max(minScale, Math.min(maxScale, targetScale));&#10;    const translate = [width / 2 - scale * x, height / 2 - scale * y];&#10;    const transform = d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale);&#10;&#10;    if (animate) {&#10;      svg.transition().duration(900).call(zoom.transform, transform);&#10;    } else {&#10;      svg.call(zoom.transform, transform);&#10;    }&#10;  }&#10;&#10;  function updatePoints(countryIso) {&#10;    const dataPoints = countryIso ? COUNTRY_BY_ISO.get(countryIso)?.points || [] : [];&#10;&#10;    const selection = pointsLayer.selectAll(&quot;.data-point&quot;).data(dataPoints, (d) =&gt; d.id);&#10;&#10;    selection&#10;      .exit()&#10;      .transition()&#10;      .duration(300)&#10;      .style(&quot;opacity&quot;, 0)&#10;      .remove();&#10;&#10;    const entered = selection&#10;      .enter()&#10;      .append(&quot;g&quot;)&#10;      .attr(&quot;class&quot;, &quot;data-point&quot;)&#10;      .style(&quot;opacity&quot;, 0)&#10;      .on(&quot;click&quot;, function (event, d) {&#10;        event.stopPropagation();&#10;        const countryConfig = COUNTRY_BY_ISO.get(countryIso);&#10;        openDetailPanel(d, countryConfig);&#10;      });&#10;&#10;    entered.append(&quot;circle&quot;).attr(&quot;class&quot;, &quot;point-ring&quot;).attr(&quot;r&quot;, 32);&#10;    entered.append(&quot;circle&quot;).attr(&quot;class&quot;, &quot;point-core&quot;).attr(&quot;r&quot;, 20);&#10;    &#10;    // Add SVG icon instead of text&#10;    // SVG icons are 24x24, centered at origin with scale ~0.83 to fit in 20px core circle&#10;    const ICON_SIZE = 24;&#10;    const ICON_SCALE = 0.83;&#10;    // When using transform=&quot;translate(tx,ty) scale(s)&quot;, the translate is applied&#10;    // before the scale. For icons with original box 0..ICON_SIZE the correct&#10;    // tx/ty to center is -ICON_SIZE/2 (independent of scale).&#10;    const ICON_OFFSET = -ICON_SIZE / 2;&#10;    &#10;    const iconGroup = entered.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;point-icon&quot;);&#10;    iconGroup&#10;      .append(&quot;path&quot;)&#10;      .attr(&quot;d&quot;, (d) =&gt; SVG_ICONS[DATA_CONFIG.categories[d.category]?.icon] || &quot;&quot;)&#10;      .attr(&quot;transform&quot;, `translate(${ICON_OFFSET}, ${ICON_OFFSET}) scale(${ICON_SCALE})`)&#10;      .attr(&quot;fill&quot;, &quot;#0b162f&quot;);&#10;    &#10;    entered.append(&quot;title&quot;).text((d) =&gt; d.title);&#10;&#10;    const merged = entered.merge(selection);&#10;&#10;    merged.each(function (d) {&#10;      d.countryIso = countryIso;&#10;      if (!Array.isArray(d.coordinates) || d.coordinates.length !== 2) return;&#10;      d.projected = projection(d.coordinates);&#10;      const [px, py] = currentTransform.apply(d.projected);&#10;      const category = DATA_CONFIG.categories[d.category];&#10;      const color = category?.color || &quot;#ffffff&quot;;&#10;      d3.select(this)&#10;        .classed(&quot;coming-soon&quot;, !!d.comingSoon)&#10;        .attr(&quot;transform&quot;, `translate(${px},${py})`)&#10;        .style(&quot;opacity&quot;, 1)&#10;        .select(&quot;circle.point-core&quot;)&#10;        .attr(&quot;fill&quot;, color);&#10;    });&#10;&#10;    highlightSelectedPoint(null);&#10;  }&#10;&#10;  function updatePointPositions() {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).each(function (d) {&#10;      if (!Array.isArray(d.coordinates)) return;&#10;      d.projected = projection(d.coordinates);&#10;    });&#10;  }&#10;&#10;  function updatePointTransforms() {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).each(function (d) {&#10;      if (!d.projected) return;&#10;      const [x, y] = currentTransform.apply(d.projected);&#10;      d3.select(this).attr(&quot;transform&quot;, `translate(${x},${y})`);&#10;    });&#10;  }&#10;&#10;  function renderContinentSummary() {&#10;    continentSummary.innerHTML = &quot;&quot;;&#10;&#10;    if (state.country) {&#10;      const countryConfig = COUNTRY_BY_ISO.get(state.country);&#10;      if (!countryConfig) return;&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = countryConfig.name;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.textContent = countryConfig.overview || &quot;Keine Übersicht verfügbar.&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;    } else if (state.continent) {&#10;      const info = DATA_CONFIG.continents[state.continent];&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = state.continent;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.textContent = info?.description || &quot;Keine Beschreibung verfügbar.&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;    } else {&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = &quot;So funktioniert es&quot;;&#10;      const paragraph = document.createElement(&quot;p&quot;);&#10;      paragraph.innerHTML =&#10;        &quot;&lt;strong&gt;1.&lt;/strong&gt; Kontinent auswählen · &lt;strong&gt;2.&lt;/strong&gt; Land fokussieren · &lt;strong&gt;3.&lt;/strong&gt; Themenpunkt öffnen.&quot;;&#10;      const info = document.createElement(&quot;p&quot;);&#10;      info.textContent = &quot;Alle Kennzahlen lassen sich direkt ohne Backend anpassen (siehe scripts/data.js).&quot;;&#10;      continentSummary.appendChild(title);&#10;      continentSummary.appendChild(paragraph);&#10;      continentSummary.appendChild(info);&#10;    }&#10;  }&#10;&#10;  function renderCountryList(highlightCountry) {&#10;    countryList.innerHTML = &quot;&quot;;&#10;&#10;    if (!state.continent) {&#10;      const title = document.createElement(&quot;h2&quot;);&#10;      title.textContent = &quot;Kontinente&quot;;&#10;      const text = document.createElement(&quot;p&quot;);&#10;      text.textContent = &quot;Nutze die Chips oder klicke auf die Karte, um zu einer Region zu springen.&quot;;&#10;      countryList.appendChild(title);&#10;      countryList.appendChild(text);&#10;      return;&#10;    }&#10;&#10;     const continent = DATA_CONFIG.continents[state.continent];&#10;    const title = document.createElement(&quot;h2&quot;);&#10;    title.textContent = `${state.continent} · Länder`;&#10;    countryList.appendChild(title);&#10;&#10;    const list = document.createElement(&quot;div&quot;);&#10;    list.className = &quot;country-buttons&quot;;&#10;&#10;    continent.countries.forEach((iso) =&gt; {&#10;      const config = COUNTRY_BY_ISO.get(iso);&#10;      const button = document.createElement(&quot;button&quot;);&#10;      button.className = &quot;country-button&quot;;&#10;      button.type = &quot;button&quot;;&#10;&#10;      const name = config?.name || featureByIso.get(iso)?.properties?.name || iso;&#10;      const label = document.createElement(&quot;span&quot;);&#10;      label.textContent = name;&#10;      const status = document.createElement(&quot;small&quot;);&#10;      if (config?.active) {&#10;        status.textContent = &quot;Aktiv&quot;;&#10;      } else {&#10;        status.textContent = &quot;In Vorbereitung&quot;;&#10;      }&#10;&#10;      button.appendChild(label);&#10;      button.appendChild(status);&#10;&#10;      if (!config || !config.active) {&#10;        button.classList.add(&quot;is-disabled&quot;);&#10;        button.disabled = true;&#10;      } else {&#10;        button.addEventListener(&quot;click&quot;, () =&gt; {&#10;          focusCountry(iso);&#10;        });&#10;      }&#10;&#10;      if (state.country === iso) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      } else if (highlightCountry &amp;&amp; highlightCountry === iso) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      }&#10;&#10;      list.appendChild(button);&#10;    });&#10;&#10;    countryList.appendChild(list);&#10;  }&#10;&#10;  function renderLegend() {&#10;    const legend = document.getElementById(&quot;legend&quot;);&#10;    legend.innerHTML = &quot;&quot;;&#10;&#10;    const title = document.createElement(&quot;h2&quot;);&#10;    title.textContent = &quot;Legende&quot;;&#10;    legend.appendChild(title);&#10;&#10;    Object.values(DATA_CONFIG.categories).forEach((value) =&gt; {&#10;      const item = document.createElement(&quot;div&quot;);&#10;      item.className = &quot;legend-item&quot;;&#10;      const swatch = document.createElement(&quot;span&quot;);&#10;      swatch.className = &quot;swatch&quot;;&#10;      swatch.style.background = value.color;&#10;      const textWrapper = document.createElement(&quot;div&quot;);&#10;      const label = document.createElement(&quot;strong&quot;);&#10;      label.textContent = value.label;&#10;      const description = document.createElement(&quot;div&quot;);&#10;      description.textContent = value.description;&#10;      textWrapper.appendChild(label);&#10;      textWrapper.appendChild(description);&#10;      item.appendChild(swatch);&#10;      item.appendChild(textWrapper);&#10;      legend.appendChild(item);&#10;    });&#10;  }&#10;&#10;  function renderContinentChips() {&#10;    chipsContainer.innerHTML = &quot;&quot;;&#10;&#10;    CONTINENT_LIST.forEach((name) =&gt; {&#10;      const chip = document.createElement(&quot;button&quot;);&#10;      chip.type = &quot;button&quot;;&#10;      chip.className = &quot;chip&quot;;&#10;    const activeCount = DATA_CONFIG.continents[name].countries.filter((iso) =&gt; isCountryActive(iso)).length;&#10;    chip.innerHTML = `&lt;span&gt;${name}&lt;/span&gt;&lt;small&gt;${activeCount} Standorte&lt;/small&gt;`;&#10;    chip.addEventListener(&quot;click&quot;, () =&gt; {&#10;      focusContinent(name);&#10;    });&#10;    chipsContainer.appendChild(chip);&#10;  });&#10;&#10;    updateContinentChips();&#10;  }&#10;&#10;  function updateContinentChips() {&#10;    const chipNodes = chipsContainer.querySelectorAll(&quot;.chip&quot;);&#10;    chipNodes.forEach((chip) =&gt; {&#10;      const label = chip.querySelector(&quot;span&quot;)?.textContent || &quot;&quot;;&#10;      chip.classList.toggle(&quot;is-active&quot;, !!state.continent &amp;&amp; label === state.continent);&#10;    });&#10;  }&#10;&#10;  function updateBreadcrumb() {&#10;    breadcrumb.innerHTML = &quot;&quot;;&#10;&#10;    const items = [];&#10;    items.push({ label: &quot;Welt&quot;, action: () =&gt; resetView(), clickable: state.level !== &quot;world&quot; });&#10;    if (state.continent) {&#10;      items.push({&#10;        label: state.continent,&#10;        action: () =&gt; focusContinent(state.continent),&#10;        clickable: state.level === &quot;country&quot;&#10;      });&#10;    }&#10;    if (state.country) {&#10;      const countryName = COUNTRY_BY_ISO.get(state.country)?.name || state.country;&#10;      items.push({ label: countryName, clickable: false });&#10;    }&#10;&#10;    items.forEach((item, index) =&gt; {&#10;      if (index &gt; 0) {&#10;        const separator = document.createElement(&quot;span&quot;);&#10;        separator.textContent = &quot;›&quot;;&#10;        separator.className = &quot;breadcrumb-separator&quot;;&#10;        breadcrumb.appendChild(separator);&#10;      }&#10;&#10;      const wrapper = document.createElement(&quot;span&quot;);&#10;      wrapper.className = &quot;breadcrumb-item&quot;;&#10;&#10;      if (item.clickable) {&#10;        const button = document.createElement(&quot;button&quot;);&#10;        button.type = &quot;button&quot;;&#10;        button.textContent = item.label;&#10;        button.addEventListener(&quot;click&quot;, item.action);&#10;        wrapper.appendChild(button);&#10;      } else {&#10;        const label = document.createElement(&quot;span&quot;);&#10;        label.textContent = item.label;&#10;        wrapper.appendChild(label);&#10;      }&#10;&#10;      breadcrumb.appendChild(wrapper);&#10;    });&#10;  }&#10;&#10;  function highlightSelectedPoint(pointId) {&#10;    pointsLayer.selectAll(&quot;.data-point&quot;).classed(&quot;is-selected&quot;, (d) =&gt; d.id === pointId);&#10;    state.selectedPoint = pointId;&#10;  }&#10;&#10;  function renderOrgSelector(point) {&#10;    orgSelector.innerHTML = &quot;&quot;;&#10;&#10;    if (point?.comingSoon) {&#10;      orgSelector.style.display = &quot;none&quot;;&#10;      return;&#10;    }&#10;&#10;    orgSelector.style.display = &quot;flex&quot;;&#10;&#10;    ORG_OPTIONS.forEach((option) =&gt; {&#10;      const button = document.createElement(&quot;button&quot;);&#10;      button.type = &quot;button&quot;;&#10;      button.className = &quot;org-option&quot;;&#10;      button.textContent = option;&#10;      button.setAttribute(&quot;role&quot;, &quot;radio&quot;);&#10;      button.setAttribute(&quot;aria-checked&quot;, option === state.selectedOrg ? &quot;true&quot; : &quot;false&quot;);&#10;      button.addEventListener(&quot;click&quot;, () =&gt; {&#10;        state.selectedOrg = option;&#10;        updateOrgSelector(point);&#10;        updatePanelContent(point);&#10;      });&#10;      if (option === state.selectedOrg) {&#10;        button.classList.add(&quot;is-active&quot;);&#10;      }&#10;      orgSelector.appendChild(button);&#10;    });&#10;  }&#10;&#10;  function updateOrgSelector(point) {&#10;    orgSelector.querySelectorAll(&quot;.org-option&quot;).forEach((button) =&gt; {&#10;      const isActive = button.textContent === state.selectedOrg;&#10;      button.setAttribute(&quot;aria-checked&quot;, isActive ? &quot;true&quot; : &quot;false&quot;);&#10;      button.classList.toggle(&quot;is-active&quot;, isActive);&#10;      button.disabled = !!point?.comingSoon;&#10;    });&#10;  }&#10;&#10;  function createMetricCard(metric) {&#10;    const card = document.createElement(&quot;div&quot;);&#10;    card.className = &quot;metric-card&quot;;&#10;    const title = document.createElement(&quot;h3&quot;);&#10;    title.textContent = metric.label;&#10;    const value = document.createElement(&quot;div&quot;);&#10;    value.className = &quot;metric-value&quot;;&#10;    value.textContent = metric.value;&#10;    card.appendChild(title);&#10;    card.appendChild(value);&#10;    if (metric.trend) {&#10;      const trend = document.createElement(&quot;div&quot;);&#10;      trend.className = &quot;metric-trend&quot;;&#10;      trend.textContent = metric.trend;&#10;      if (/^\+/.test(metric.trend)) {&#10;        trend.classList.add(&quot;is-positive&quot;);&#10;      } else if (/^−|-/.test(metric.trend)) {&#10;        trend.classList.add(&quot;is-negative&quot;);&#10;      }&#10;      card.appendChild(trend);&#10;    }&#10;    return card;&#10;  }&#10;&#10;  function renderProgressList(items) {&#10;    const wrapper = document.createElement(&quot;div&quot;);&#10;    wrapper.className = &quot;progress-list&quot;;&#10;    items.forEach((item) =&gt; {&#10;      const block = document.createElement(&quot;div&quot;);&#10;      block.className = &quot;progress-item&quot;;&#10;      const label = document.createElement(&quot;span&quot;);&#10;      label.textContent = item.label;&#10;      const bar = document.createElement(&quot;div&quot;);&#10;      bar.className = &quot;progress-bar&quot;;&#10;      const fill = document.createElement(&quot;div&quot;);&#10;      fill.className = &quot;fill&quot;;&#10;      const value = Math.max(0, Math.min(100, item.value ?? 0));&#10;      fill.style.width = `${value}%`;&#10;      bar.appendChild(fill);&#10;      block.appendChild(label);&#10;      block.appendChild(bar);&#10;      wrapper.appendChild(block);&#10;    });&#10;    return wrapper;&#10;  }&#10;&#10;  function renderCompareGrid(dataset) {&#10;    const grid = document.createElement(&quot;div&quot;);&#10;    grid.className = &quot;compare-grid&quot;;&#10;&#10;    const left = document.createElement(&quot;div&quot;);&#10;    left.className = &quot;compare-column&quot;;&#10;    const leftTitle = document.createElement(&quot;h3&quot;);&#10;    leftTitle.textContent = dataset.leftLabel || &quot;CVS&quot;;&#10;    left.appendChild(leftTitle);&#10;    const leftList = document.createElement(&quot;ul&quot;);&#10;&#10;    const right = document.createElement(&quot;div&quot;);&#10;    right.className = &quot;compare-column&quot;;&#10;    const rightTitle = document.createElement(&quot;h3&quot;);&#10;    rightTitle.textContent = dataset.rightLabel || &quot;RVS&quot;;&#10;    right.appendChild(rightTitle);&#10;    const rightList = document.createElement(&quot;ul&quot;);&#10;&#10;    (dataset.metrics || []).forEach((metric) =&gt; {&#10;      const leftItem = document.createElement(&quot;li&quot;);&#10;      const leftLabel = document.createElement(&quot;span&quot;);&#10;      leftLabel.textContent = metric.label;&#10;      const leftValue = document.createElement(&quot;span&quot;);&#10;      leftValue.className = &quot;value&quot;;&#10;      leftValue.textContent = metric.left ?? &quot;—&quot;;&#10;      leftItem.appendChild(leftLabel);&#10;      leftItem.appendChild(leftValue);&#10;      leftList.appendChild(leftItem);&#10;&#10;      const rightItem = document.createElement(&quot;li&quot;);&#10;      const rightLabel = document.createElement(&quot;span&quot;);&#10;      rightLabel.textContent = metric.label;&#10;      const rightValue = document.createElement(&quot;span&quot;);&#10;      rightValue.className = &quot;value&quot;;&#10;      rightValue.textContent = metric.right ?? &quot;—&quot;;&#10;      rightItem.appendChild(rightLabel);&#10;      rightItem.appendChild(rightValue);&#10;      rightList.appendChild(rightItem);&#10;    });&#10;&#10;    left.appendChild(leftList);&#10;    right.appendChild(rightList);&#10;    grid.appendChild(left);&#10;    grid.appendChild(right);&#10;    return grid;&#10;  }&#10;&#10;  function updatePanelContent(point) {&#10;    panelBody.innerHTML = &quot;&quot;;&#10;&#10;    if (!point) return;&#10;&#10;    if (point.comingSoon) {&#10;      const info = document.createElement(&quot;div&quot;);&#10;      info.className = &quot;coming-soon&quot;;&#10;      info.textContent = &quot;Coming Soon: Datensatz befindet sich in Vorbereitung.&quot;;&#10;      panelBody.appendChild(info);&#10;      return;&#10;    }&#10;&#10;    let dataset;&#10;    if (state.selectedOrg === &quot;CVS vs RVS&quot;) {&#10;      dataset = point.data?.compare;&#10;    } else {&#10;      dataset = point.data?.[state.selectedOrg];&#10;    }&#10;&#10;    if (!dataset) {&#10;      const message = document.createElement(&quot;div&quot;);&#10;      message.className = &quot;no-data&quot;;&#10;      message.textContent = &quot;Kein Datensatz verfügbar.&quot;;&#10;      panelBody.appendChild(message);&#10;      return;&#10;    }&#10;&#10;    if (dataset.summary) {&#10;      const summary = document.createElement(&quot;div&quot;);&#10;      summary.className = &quot;dataset-summary&quot;;&#10;      summary.textContent = dataset.summary;&#10;      panelBody.appendChild(summary);&#10;    }&#10;&#10;    if (state.selectedOrg === &quot;CVS vs RVS&quot;) {&#10;      panelBody.appendChild(renderCompareGrid(dataset));&#10;    } else {&#10;      if (dataset.metrics?.length) {&#10;        const grid = document.createElement(&quot;div&quot;);&#10;        grid.className = &quot;metric-grid&quot;;&#10;        dataset.metrics.forEach((metric) =&gt; {&#10;          grid.appendChild(createMetricCard(metric));&#10;        });&#10;        panelBody.appendChild(grid);&#10;      }&#10;&#10;      if (dataset.progress?.length) {&#10;        panelBody.appendChild(renderProgressList(dataset.progress));&#10;      }&#10;    }&#10;  }&#10;&#10;  function openDetailPanel(point, countryConfig) {&#10;    highlightSelectedPoint(point.id);&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;&#10;    panelTitle.textContent = point.title;&#10;    const category = DATA_CONFIG.categories[point.category];&#10;    panelSubtitle.textContent = `${countryConfig?.name || &quot;&quot;} · ${category?.label || &quot;&quot;}`;&#10;&#10;    renderOrgSelector(point);&#10;    updatePanelContent(point);&#10;&#10;    detailPanel.classList.add(&quot;is-visible&quot;);&#10;    detailPanel.setAttribute(&quot;aria-hidden&quot;, &quot;false&quot;);&#10;  }&#10;&#10;  function hideDetailPanel() {&#10;    detailPanel.classList.remove(&quot;is-visible&quot;);&#10;    detailPanel.setAttribute(&quot;aria-hidden&quot;, &quot;true&quot;);&#10;    highlightSelectedPoint(null);&#10;  }&#10;&#10;  function resetView() {&#10;    state.level = &quot;world&quot;;&#10;    state.continent = null;&#10;    state.country = null;&#10;    state.selectedPoint = null;&#10;    state.selectedOrg = ORG_OPTIONS[0];&#10;    hideDetailPanel();&#10;    updateBreadcrumb();&#10;    renderContinentSummary();&#10;    renderCountryList();&#10;    updateContinentChips();&#10;    updateCountryClasses();&#10;    updatePoints(null);&#10;    zoomToWorld(true);&#10;  }&#10;&#10;  function restoreCurrentView() {&#10;    if (state.level === &quot;country&quot; &amp;&amp; state.country) {&#10;      focusCountry(state.country, { animate: false });&#10;    } else if (state.level === &quot;continent&quot; &amp;&amp; state.continent) {&#10;      focusContinent(state.continent, { highlightCountry: state.country, animate: false });&#10;    } else {&#10;      zoomToWorld(false);&#10;    }&#10;  }&#10;&#10;  function handleResize() {&#10;    updateProjection();&#10;    drawCountries();&#10;    updatePointPositions();&#10;    updatePointTransforms();&#10;    restoreCurrentView();&#10;  }&#10;&#10;  document.querySelector(&quot;.close-detail&quot;).addEventListener(&quot;click&quot;, hideDetailPanel);&#10;  detailPanel.addEventListener(&quot;click&quot;, (event) =&gt; {&#10;    if (event.target === detailPanel) {&#10;      hideDetailPanel();&#10;    }&#10;  });&#10;  document.addEventListener(&quot;keydown&quot;, (event) =&gt; {&#10;    if (event.key === &quot;Escape&quot;) {&#10;      hideDetailPanel();&#10;    }&#10;  });&#10;&#10;  resetButton.addEventListener(&quot;click&quot;, () =&gt; resetView());&#10;&#10;  renderLegend();&#10;  renderContinentChips();&#10;  updateProjection();&#10;  drawCountries();&#10;  renderContinentSummary();&#10;  renderCountryList();&#10;  updateBreadcrumb();&#10;  updateCountryClasses();&#10;  zoomToWorld(false);&#10;&#10;  window.addEventListener(&quot;resize&quot;, handleResize);&#10;})();&#10;" />
+            </PendingDiffInfo>
+          </value>
+        </entry>
         <entry key="$PROJECT_DIR$/styles.custom.example.css">
           <value>
             <PendingDiffInfo>
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"025cd9f7-1e8c-421a-9197-1853df2f06a5\" name=\"Changes\" comment=\"Fix map styling and add migration state files\">\r\n      <change afterPath=\"$PROJECT_DIR$/.gitignore\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/config.example.json\" afterDir=\"false\" />\r\n      <change afterPath=\"$PROJECT_DIR$/styles.custom.example.css\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/README.md\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/README.md\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/index.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/index.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/scripts/app.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/scripts/app.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/styles.css\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/styles.css\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"codex/fix-map-coloring-and-hover-issues\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;SebiShepherd&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/SebiShepherd/Futurmapa.git&quot;,\r\n    &quot;accountId&quot;: &quot;7e33eaad-9dd4-4e6e-b589-dd9ac8d57c77&quot;\r\n  }\r\n}</component>\r\n  <component name=\"ProblemsViewState\">\r\n    <option name=\"selectedTabId\" value=\"CurrentFile\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 2\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"347ObgjNCbpWEgZbXXGqLq0NjZP\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"ASKED_SHARE_PROJECT_CONFIGURATION_FILES\": \"true\",\r\n    \"JavaScript Debug.index.html.executor\": \"Run\",\r\n    \"ModuleVcsDetector.initialDetectionPerformed\": \"true\",\r\n    \"Node.js.app.js.executor\": \"Run\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252\": \"true\",\r\n    \"RunOnceActivity.git.unshallow\": \"true\",\r\n    \"com.intellij.ml.llm.matterhorn.ej.ui.settings.DefaultModelSelectionForGA.v1\": \"true\",\r\n    \"git-widget-placeholder\": \"visual-adjust\",\r\n    \"ignore.virus.scanning.warn.message\": \"true\",\r\n    \"junie.onboarding.icon.badge.shown\": \"true\",\r\n    \"last_opened_file_path\": \"C:/Users/truei/WebstormProjects/Futurmapa\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"npm\",\r\n    \"run.code.analysis.last.selected.profile\": \"pProject Default\",\r\n    \"settings.editor.selected.configurable\": \"reference.settings.ide.settings.web.browsers\",\r\n    \"to.speed.mode.migration.done\": \"true\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\truei\\WebstormProjects\\Futurmapa\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\truei\\WebstormProjects\\Futurmapa\\assets\" />\r\n      <recent name=\"C:\\Users\\truei\\WebstormProjects\\Futurmapa\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-e03c56caf84a-JavaScript-WS-252.23892.411\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"025cd9f7-1e8c-421a-9197-1853df2f06a5\" name=\"Changes\" comment=\"\" />\r\n      <created>1760561216956</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1760561216956</updated>\r\n      <workItem from=\"1760561218218\" duration=\"3918000\" />\r\n      <workItem from=\"1760642630951\" duration=\"10837000\" />\r\n      <workItem from=\"1760689034375\" duration=\"1976000\" />\r\n      <workItem from=\"1760731300141\" duration=\"7464000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Fix map styling and add migration state files\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1760690201910</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1760690201911</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"2\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"Fix map styling and add migration configuration files\" />\r\n    <MESSAGE value=\"Fix map styling and add migration state files\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Fix map styling and add migration state files\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 39111da0c5cef90353b52e334b697e8d8f08bdfe)
+++ b/.idea/workspace.xml	(date 1760862631927)
@@ -5,12 +5,7 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="025cd9f7-1e8c-421a-9197-1853df2f06a5" name="Changes" comment="Fix map styling and add migration state files">
-      <change afterPath="$PROJECT_DIR$/.gitignore" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/config.example.json" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/styles.custom.example.css" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/README.md" beforeDir="false" afterPath="$PROJECT_DIR$/README.md" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/index.html" beforeDir="false" afterPath="$PROJECT_DIR$/index.html" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/scripts/app.js" beforeDir="false" afterPath="$PROJECT_DIR$/scripts/app.js" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/styles.css" beforeDir="false" afterPath="$PROJECT_DIR$/styles.css" afterDir="false" />
     </list>
@@ -22,7 +17,7 @@
   <component name="Git.Settings">
     <option name="RECENT_BRANCH_BY_REPOSITORY">
       <map>
-        <entry key="$PROJECT_DIR$" value="codex/fix-map-coloring-and-hover-issues" />
+        <entry key="$PROJECT_DIR$" value="codex/anpassen-der-points-of-interest-icons" />
       </map>
     </option>
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
@@ -60,7 +55,7 @@
     "RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252": "true",
     "RunOnceActivity.git.unshallow": "true",
     "com.intellij.ml.llm.matterhorn.ej.ui.settings.DefaultModelSelectionForGA.v1": "true",
-    "git-widget-placeholder": "visual-adjust",
+    "git-widget-placeholder": "#23 on copilot/update-points-of-interest-icons",
     "ignore.virus.scanning.warn.message": "true",
     "junie.onboarding.icon.badge.shown": "true",
     "last_opened_file_path": "C:/Users/truei/WebstormProjects/Futurmapa",
